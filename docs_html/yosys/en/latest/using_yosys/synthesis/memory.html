<!doctype html>
<html class="no-js" lang="en" data-content_root="../../">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="index" title="Index" href="../../genindex.html" /><link rel="search" title="Search" href="../../search.html" /><link rel="next" title="Optimization passes" href="opt.html" /><link rel="prev" title="FSM handling" href="fsm.html" />

    <link rel="shortcut icon" href="../../_static/yshq_favicon.png"/><!-- Generated with Sphinx 8.2.3 and Furo 2025.04.22.dev1 -->
        <title>Memory handling - YosysHQ Yosys 0.55-dev documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=d111a655" />
    <link rel="stylesheet" type="text/css" href="../../_static/styles/furo-ys.css?v=5cc2bdad" />
    <link rel="stylesheet" type="text/css" href="../../_static/styles/furo-extensions.css?v=8dab3a3b" />
    <link rel="stylesheet" type="text/css" href="../../_static/custom.css?v=63c85a92" />
    
    


<style>
  body {
    --color-code-background: #f2f2f2;
  --color-code-foreground: #1e1e1e;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #2b2b2b;
  --color-code-foreground: #f8f8f2;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #2b2b2b;
  --color-code-foreground: #f8f8f2;
  
      }
    }
  }
</style><script async type="text/javascript" src="/_/static/javascript/readthedocs-addons.js"></script><meta name="readthedocs-project-slug" content="yosys" /><meta name="readthedocs-version-slug" content="latest" /><meta name="readthedocs-resolver-filename" content="/using_yosys/synthesis/memory.html" /><meta name="readthedocs-http-status" content="200" /></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-with-moon" viewBox="0 0 24 24">
    <title>Auto light/dark, in light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path style="opacity: 50%" d="M 5.411 14.504 C 5.471 14.504 5.532 14.504 5.591 14.504 C 3.639 16.319 4.383 19.569 6.931 20.352 C 7.693 20.586 8.512 20.551 9.25 20.252 C 8.023 23.207 4.056 23.725 2.11 21.184 C 0.166 18.642 1.702 14.949 4.874 14.536 C 5.051 14.512 5.231 14.5 5.411 14.5 L 5.411 14.504 Z"/>
      <line x1="14.5" y1="3.25" x2="14.5" y2="1.25"/>
      <line x1="14.5" y1="15.85" x2="14.5" y2="17.85"/>
      <line x1="10.044" y1="5.094" x2="8.63" y2="3.68"/>
      <line x1="19" y1="14.05" x2="20.414" y2="15.464"/>
      <line x1="8.2" y1="9.55" x2="6.2" y2="9.55"/>
      <line x1="20.8" y1="9.55" x2="22.8" y2="9.55"/>
      <line x1="10.044" y1="14.006" x2="8.63" y2="15.42"/>
      <line x1="19" y1="5.05" x2="20.414" y2="3.636"/>
      <circle cx="14.5" cy="9.55" r="3.6"/>
    </svg>
  </symbol>
  <symbol id="svg-moon-with-sun" viewBox="0 0 24 24">
    <title>Auto light/dark, in dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path d="M 8.282 7.007 C 8.385 7.007 8.494 7.007 8.595 7.007 C 5.18 10.184 6.481 15.869 10.942 17.24 C 12.275 17.648 13.706 17.589 15 17.066 C 12.851 22.236 5.91 23.143 2.505 18.696 C -0.897 14.249 1.791 7.786 7.342 7.063 C 7.652 7.021 7.965 7 8.282 7 L 8.282 7.007 Z"/>
      <line style="opacity: 50%" x1="18" y1="3.705" x2="18" y2="2.5"/>
      <line style="opacity: 50%" x1="18" y1="11.295" x2="18" y2="12.5"/>
      <line style="opacity: 50%" x1="15.316" y1="4.816" x2="14.464" y2="3.964"/>
      <line style="opacity: 50%" x1="20.711" y1="10.212" x2="21.563" y2="11.063"/>
      <line style="opacity: 50%" x1="14.205" y1="7.5" x2="13.001" y2="7.5"/>
      <line style="opacity: 50%" x1="21.795" y1="7.5" x2="23" y2="7.5"/>
      <line style="opacity: 50%" x1="15.316" y1="10.184" x2="14.464" y2="11.036"/>
      <line style="opacity: 50%" x1="20.711" y1="4.789" x2="21.563" y2="3.937"/>
      <circle style="opacity: 50%" cx="18" cy="7.5" r="2.169"/>
    </svg>
  </symbol>
  <symbol id="svg-pencil" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-pencil-code">
      <path d="M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4" />
      <path d="M13.5 6.5l4 4" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
  <symbol id="svg-eye" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-eye-code">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0" />
      <path
        d="M11.11 17.958c-3.209 -.307 -5.91 -2.293 -8.11 -5.958c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6c-.21 .352 -.427 .688 -.647 1.008" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>

<a class="skip-to-content muted-link" href="#furo-main-content">Skip to content</a>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../../index.html"><div class="brand">YosysHQ Yosys 0.55-dev documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
          <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand"
   title="External link to https://yosyshq.readthedocs.io"
   href="https://yosyshq.readthedocs.io"><div class="sidebar-logo-container">
    <img class="sidebar-logo" src="../../_static/yshq_logo.png" alt="Main Brand Logo"/>
  </div>
  
  
  
</a><form class="sidebar-search-container" method="get" action="../../search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../index.html">Yosys (index)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../introduction.html">What is Yosys</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../getting_started/index.html">Getting started with Yosys</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle navigation of Getting started with Yosys</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../getting_started/installation.html">Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../getting_started/example_synth.html">Synthesis starter</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../getting_started/scripting_intro.html">Scripting in Yosys</a></li>
</ul>
</li>
<li class="toctree-l1 current has-children"><a class="reference internal" href="../index.html">Using Yosys (advanced)</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle navigation of Using Yosys (advanced)</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l2 current has-children"><a class="reference internal" href="index.html">Synthesis in detail</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><div class="visually-hidden">Toggle navigation of Synthesis in detail</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="synth.html">Synth commands</a></li>
<li class="toctree-l3"><a class="reference internal" href="proc.html">Converting process blocks</a></li>
<li class="toctree-l3"><a class="reference internal" href="fsm.html">FSM handling</a></li>
<li class="toctree-l3 current current-page"><a class="current reference internal" href="#">Memory handling</a></li>
<li class="toctree-l3"><a class="reference internal" href="opt.html">Optimization passes</a></li>
<li class="toctree-l3"><a class="reference internal" href="techmap_synth.html">Technology mapping</a></li>
<li class="toctree-l3"><a class="reference internal" href="extract.html">The extract pass</a></li>
<li class="toctree-l3"><a class="reference internal" href="abc.html">The ABC toolbox</a></li>
<li class="toctree-l3"><a class="reference internal" href="cell_libs.html">Mapping to cell libraries</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../more_scripting/index.html">More scripting</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" role="switch" type="checkbox"/><label for="toctree-checkbox-4"><div class="visually-hidden">Toggle navigation of More scripting</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../more_scripting/load_design.html">Loading a design</a></li>
<li class="toctree-l3"><a class="reference internal" href="../more_scripting/selections.html">Selections</a></li>
<li class="toctree-l3"><a class="reference internal" href="../more_scripting/interactive_investigation.html">Interactive design investigation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../more_scripting/model_checking.html">Symbolic model checking</a></li>
<li class="toctree-l3"><a class="reference internal" href="../more_scripting/data_flow_tracking.html">Dataflow tracking</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../yosys_internals/index.html">Yosys internals</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" role="switch" type="checkbox"/><label for="toctree-checkbox-5"><div class="visually-hidden">Toggle navigation of Yosys internals</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../yosys_internals/flow/index.html">Internal flow</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" role="switch" type="checkbox"/><label for="toctree-checkbox-6"><div class="visually-hidden">Toggle navigation of Internal flow</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../yosys_internals/flow/overview.html">Flow overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../yosys_internals/flow/control_and_data.html">Control and data flow</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../yosys_internals/flow/verilog_frontend.html">The Verilog and AST frontends</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../yosys_internals/formats/index.html">Internal formats</a><input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" role="switch" type="checkbox"/><label for="toctree-checkbox-7"><div class="visually-hidden">Toggle navigation of Internal formats</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../yosys_internals/formats/rtlil_rep.html">The RTL Intermediate Language (RTLIL)</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../yosys_internals/extending_yosys/index.html">Working with the Yosys codebase</a><input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" role="switch" type="checkbox"/><label for="toctree-checkbox-8"><div class="visually-hidden">Toggle navigation of Working with the Yosys codebase</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../yosys_internals/extending_yosys/extensions.html">Writing extensions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../yosys_internals/extending_yosys/build_verific.html">Compiling with Verific library</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../yosys_internals/extending_yosys/functional_ir.html">Writing a new backend using FunctionalIR</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../yosys_internals/extending_yosys/contributing.html">Contributing to Yosys</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../yosys_internals/extending_yosys/test_suites.html">Testing Yosys</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../yosys_internals/techmap.html">Techmap by example</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../yosys_internals/verilog.html">Notes on Verilog support in Yosys</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../yosys_internals/hashing.html">Hashing and associative data structures in Yosys</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Appendix</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../appendix/primer.html">A primer on digital circuit synthesis</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../appendix/rtlil_text.html">RTLIL text representation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../appendix/auxlibs.html">Auxiliary libraries</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../appendix/auxprogs.html">Auxiliary programs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../bib.html">Literature references</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../cell_index.html">Internal cell library</a><input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" role="switch" type="checkbox"/><label for="toctree-checkbox-9"><div class="visually-hidden">Toggle navigation of Internal cell library</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../cell/index_word.html">Word-level cells</a><input class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" role="switch" type="checkbox"/><label for="toctree-checkbox-10"><div class="visually-hidden">Toggle navigation of Word-level cells</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../cell/word_unary.html">Unary operators</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../cell/word_binary.html">Binary operators</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../cell/word_mux.html">Multiplexers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../cell/word_reg.html">Registers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../cell/word_mem.html">Memories</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../cell/word_fsm.html">Finite state machines</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../cell/word_arith.html">Coarse arithmetics</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../cell/word_logic.html">Arbitrary logic functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../cell/word_spec.html">Specify rules</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../cell/word_formal.html">Formal verification cells</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../cell/word_debug.html">Debugging cells</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../cell/word_wire.html">Wire cells</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../cell/index_gate.html">Gate-level cells</a><input class="toctree-checkbox" id="toctree-checkbox-11" name="toctree-checkbox-11" role="switch" type="checkbox"/><label for="toctree-checkbox-11"><div class="visually-hidden">Toggle navigation of Gate-level cells</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../cell/gate_comb_simple.html">Combinatorial cells (simple)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../cell/gate_comb_combined.html">Combinatorial cells (combined)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../cell/gate_reg_ff.html">Flip-flop cells</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../cell/gate_reg_latch.html">Latch cells</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../cell/gate_other.html">Other gate-level cells</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../cell/properties.html">Cell properties</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../cmd_ref.html">Command line reference</a><input class="toctree-checkbox" id="toctree-checkbox-12" name="toctree-checkbox-12" role="switch" type="checkbox"/><label for="toctree-checkbox-12"><div class="visually-hidden">Toggle navigation of Command line reference</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../appendix/env_vars.html">Yosys environment variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/abc.html">abc - use ABC for technology mapping</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/abc9.html">abc9 - use ABC9 for technology mapping</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/abc9_exe.html">abc9_exe - use ABC9 for technology mapping</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/abc9_ops.html">abc9_ops - helper functions for ABC9</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/abc_new.html">abc_new - (experimental) use ABC for SC technology mapping (new)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/abstract.html">abstract - replace signals with abstract values during formal verification</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/add.html">add - add objects to the design</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/aigmap.html">aigmap - map logic to and-inverter-graph circuit</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/alumacc.html">alumacc - extract ALU and MACC cells</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/anlogic_eqn.html">anlogic_eqn - Anlogic: Calculate equations for luts</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/anlogic_fixcarry.html">anlogic_fixcarry - Anlogic: fix carry chain</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/assertpmux.html">assertpmux - adds asserts for parallel muxes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/async2sync.html">async2sync - convert async FF inputs to sync circuits</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/attrmap.html">attrmap - renaming attributes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/attrmvcp.html">attrmvcp - move or copy attributes from wires to driving cells</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/autoname.html">autoname - automatically assign names to objects</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/blackbox.html">blackbox - convert modules into blackbox modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/bmuxmap.html">bmuxmap - transform $bmux cells to trees of $mux cells</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/booth.html">booth - map $mul cells to Booth multipliers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/box_derive.html">box_derive - derive box modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/bufnorm.html">bufnorm - (experimental) convert design into buffered-normalized form</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/bugpoint.html">bugpoint - minimize testcases</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/bwmuxmap.html">bwmuxmap - replace $bwmux cells with equivalent logic</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/cd.html">cd - a shortcut for ‘select -module &lt;name&gt;’</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/cellmatch.html">cellmatch - match cells to their targets in cell library</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/check.html">check - check for obvious problems in the design</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/chformal.html">chformal - change formal constraints of the design</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/chparam.html">chparam - re-evaluate modules with new parameters</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/chtype.html">chtype - change type of cells in the design</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/clean.html">clean - remove unused cells and wires</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/clean_zerowidth.html">clean_zerowidth - clean zero-width connections from the design</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/clk2fflogic.html">clk2fflogic - convert clocked FFs to generic $ff cells</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/clkbufmap.html">clkbufmap - insert clock buffers on clock networks</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/clockgate.html">clockgate - extract clock gating out of flip flops</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/connect.html">connect - create or remove connections</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/connect_rpc.html">connect_rpc - connect to RPC frontend</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/connwrappers.html">connwrappers - match width of input-output port pairs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/constmap.html">constmap - technology mapping of coarse constant value</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/coolrunner2_fixup.html">coolrunner2_fixup - insert necessary buffer cells for CoolRunner-II architecture</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/coolrunner2_sop.html">coolrunner2_sop - break $sop cells into ANDTERM/ORTERM cells</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/copy.html">copy - copy modules in the design</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/cover.html">cover - print code coverage counters</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/cutpoint.html">cutpoint - adds formal cut points to the design</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/debug.html">debug - run command with debug log messages enabled</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/delete.html">delete - delete objects in the design</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/deminout.html">deminout - demote inout ports to input or output</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/demuxmap.html">demuxmap - transform $demux cells to $eq + $mux cells</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/design.html">design - save, restore and reset current design</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/dffinit.html">dffinit - set INIT param on FF cells</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/dfflegalize.html">dfflegalize - convert FFs to types supported by the target</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/dfflibmap.html">dfflibmap - technology mapping of flip-flops</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/dffunmap.html">dffunmap - unmap clock enable and synchronous reset from FFs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/dft_tag.html">dft_tag - create tagging logic for data flow tracking</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/dump.html">dump - print parts of the design in RTLIL format</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/echo.html">echo - turning echoing back of commands on and off</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/edgetypes.html">edgetypes - list all types of edges in selection</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/efinix_fixcarry.html">efinix_fixcarry - Efinix: fix carry chain</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/equiv_add.html">equiv_add - add a $equiv cell</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/equiv_induct.html">equiv_induct - proving $equiv cells using temporal induction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/equiv_make.html">equiv_make - prepare a circuit for equivalence checking</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/equiv_mark.html">equiv_mark - mark equivalence checking regions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/equiv_miter.html">equiv_miter - extract miter from equiv circuit</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/equiv_opt.html">equiv_opt - prove equivalence for optimized circuit</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/equiv_purge.html">equiv_purge - purge equivalence checking module</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/equiv_remove.html">equiv_remove - remove $equiv cells</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/equiv_simple.html">equiv_simple - try proving simple $equiv instances</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/equiv_status.html">equiv_status - print status of equivalent checking module</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/equiv_struct.html">equiv_struct - structural equivalence checking</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/eval.html">eval - evaluate the circuit given an input</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/example_dt.html">example_dt - drivertools example</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/exec.html">exec - execute commands in the operating system shell</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/expose.html">expose - convert internal signals to module ports</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/extract.html">extract - find subcircuits and replace them with cells</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/extract_counter.html">extract_counter - Extract GreenPak4 counter cells</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/extract_fa.html">extract_fa - find and extract full/half adders</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/extract_reduce.html">extract_reduce - converts gate chains into $reduce_* cells</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/extractinv.html">extractinv - extract explicit inverter cells for invertible cell pins</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/flatten.html">flatten - flatten design</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/flowmap.html">flowmap - pack LUTs with FlowMap</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/fmcombine.html">fmcombine - combine two instances of a cell into one</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/fminit.html">fminit - set init values/sequences for formal</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/formalff.html">formalff - prepare FFs for formal</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/freduce.html">freduce - perform functional reduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/fsm.html">fsm - extract and optimize finite state machines</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/fsm_detect.html">fsm_detect - finding FSMs in design</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/fsm_expand.html">fsm_expand - expand FSM cells by merging logic into it</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/fsm_export.html">fsm_export - exporting FSMs to KISS2 files</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/fsm_extract.html">fsm_extract - extracting FSMs in design</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/fsm_info.html">fsm_info - print information on finite state machines</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/fsm_map.html">fsm_map - mapping FSMs to basic logic</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/fsm_opt.html">fsm_opt - optimize finite state machines</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/fsm_recode.html">fsm_recode - recoding finite state machines</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/fst2tb.html">fst2tb - generate testbench out of fst file</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/future.html">future - resolve future sampled value functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/gatemate_foldinv.html">gatemate_foldinv - fold inverters into Gatemate LUT trees</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/glift.html">glift - create GLIFT models and optimization problems</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/greenpak4_dffinv.html">greenpak4_dffinv - merge greenpak4 inverters and DFF/latches</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/help.html">help - display help messages</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/hierarchy.html">hierarchy - check, expand and clean up design hierarchy</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/hilomap.html">hilomap - technology mapping of constant hi- and/or lo-drivers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/history.html">history - show last interactive commands</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/ice40_braminit.html">ice40_braminit - iCE40: perform SB_RAM40_4K initialization from file</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/ice40_dsp.html">ice40_dsp - iCE40: map multipliers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/ice40_opt.html">ice40_opt - iCE40: perform simple optimizations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/ice40_wrapcarry.html">ice40_wrapcarry - iCE40: wrap carries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/insbuf.html">insbuf - insert buffer cells for connected wires</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/internal_stats.html">internal_stats - print internal statistics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/iopadmap.html">iopadmap - technology mapping of i/o pads (or buffers)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/jny.html">jny - write design and metadata</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/json.html">json - write design in JSON format</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/keep_hierarchy.html">keep_hierarchy - selectively add the keep_hierarchy attribute</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/lattice_gsr.html">lattice_gsr - Lattice: handle GSR</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/libcache.html">libcache - control caching of technology library data parsed from liberty files</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/license.html">license - print license terms</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/log.html">log - print text and log files</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/logger.html">logger - set logger properties</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/ls.html">ls - list modules or objects in modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/ltp.html">ltp - print longest topological path</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/lut2mux.html">lut2mux - convert $lut to $_MUX_</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/maccmap.html">maccmap - mapping macc cells</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/memory.html">memory - translate memories to basic cells</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/memory_bmux2rom.html">memory_bmux2rom - convert muxes to ROMs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/memory_bram.html">memory_bram - map memories to block rams</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/memory_collect.html">memory_collect - creating multi-port memory cells</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/memory_dff.html">memory_dff - merge input/output DFFs into memory read ports</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/memory_libmap.html">memory_libmap - map memories to cells</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/memory_map.html">memory_map - translate multiport memories to basic cells</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/memory_memx.html">memory_memx - emulate vlog sim behavior for mem ports</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/memory_narrow.html">memory_narrow - split up wide memory ports</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/memory_nordff.html">memory_nordff - extract read port FFs from memories</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/memory_share.html">memory_share - consolidate memory ports</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/memory_unpack.html">memory_unpack - unpack multi-port memory cells</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/microchip_dffopt.html">microchip_dffopt - MICROCHIP: optimize FF control signal usage</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/microchip_dsp.html">microchip_dsp - MICROCHIP: pack resources into DSPs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/miter.html">miter - automatically create a miter circuit</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/mutate.html">mutate - generate or apply design mutations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/muxcover.html">muxcover - cover trees of MUX cells with wider MUXes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/muxpack.html">muxpack - $mux/$pmux cascades to $pmux</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/nlutmap.html">nlutmap - map to LUTs of different sizes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/nx_carry.html">nx_carry - NanoXplore: create carry cells</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/onehot.html">onehot - optimize $eq cells for onehot signals</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/opt.html">opt - perform simple optimizations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/opt_clean.html">opt_clean - remove unused cells and wires</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/opt_demorgan.html">opt_demorgan - Optimize reductions with DeMorgan equivalents</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/opt_dff.html">opt_dff - perform DFF optimizations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/opt_expr.html">opt_expr - perform const folding and simple expression rewriting</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/opt_ffinv.html">opt_ffinv - push inverters through FFs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/opt_lut.html">opt_lut - optimize LUT cells</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/opt_lut_ins.html">opt_lut_ins - discard unused LUT inputs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/opt_mem.html">opt_mem - optimize memories</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/opt_mem_feedback.html">opt_mem_feedback - convert memory read-to-write port feedback paths to write enables</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/opt_mem_priority.html">opt_mem_priority - remove priority relations between write ports that can never collide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/opt_mem_widen.html">opt_mem_widen - optimize memories where all ports are wide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/opt_merge.html">opt_merge - consolidate identical cells</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/opt_muxtree.html">opt_muxtree - eliminate dead trees in multiplexer trees</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/opt_reduce.html">opt_reduce - simplify large MUXes and AND/OR gates</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/opt_share.html">opt_share - merge mutually exclusive cells of the same type that share an input signal</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/paramap.html">paramap - renaming cell parameters</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/peepopt.html">peepopt - collection of peephole optimizers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/plugin.html">plugin - load and list loaded plugins</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/pmux2shiftx.html">pmux2shiftx - transform $pmux cells to $shiftx cells</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/pmuxtree.html">pmuxtree - transform $pmux cells to trees of $mux cells</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/portarcs.html">portarcs - derive port arcs for propagation delay</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/portlist.html">portlist - list (top-level) ports</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/prep.html">prep - generic synthesis script</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/printattrs.html">printattrs - print attributes of selected objects</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/proc.html">proc - translate processes to netlists</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/proc_arst.html">proc_arst - detect asynchronous resets</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/proc_clean.html">proc_clean - remove empty parts of processes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/proc_dff.html">proc_dff - extract flip-flops from processes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/proc_dlatch.html">proc_dlatch - extract latches from processes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/proc_init.html">proc_init - convert initial block to init attributes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/proc_memwr.html">proc_memwr - extract memory writes from processes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/proc_mux.html">proc_mux - convert decision trees to multiplexers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/proc_prune.html">proc_prune - remove redundant assignments</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/proc_rmdead.html">proc_rmdead - eliminate dead trees in decision trees</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/proc_rom.html">proc_rom - convert switches to ROMs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/qbfsat.html">qbfsat - solve a 2QBF-SAT problem in the circuit</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/ql_bram_merge.html">ql_bram_merge - Infers QuickLogic k6n10f BRAM pairs that can operate independently</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/ql_bram_types.html">ql_bram_types - Change TDP36K type to subtypes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/ql_dsp_io_regs.html">ql_dsp_io_regs - change types of QL_DSP2 depending on configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/ql_dsp_macc.html">ql_dsp_macc - infer QuickLogic multiplier-accumulator DSP cells</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/ql_dsp_simd.html">ql_dsp_simd - merge QuickLogic K6N10f DSP pairs to operate in SIMD mode</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/ql_ioff.html">ql_ioff - Infer I/O FFs for qlf_k6n10f architecture</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/read.html">read - load HDL designs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/read_aiger.html">read_aiger - read AIGER file</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/read_blif.html">read_blif - read BLIF file</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/read_json.html">read_json - read JSON file</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/read_liberty.html">read_liberty - read cells from liberty file</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/read_rtlil.html">read_rtlil - read modules from RTLIL file</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/read_verilog.html">read_verilog - read modules from Verilog file</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/read_verilog_file_list.html">read_verilog_file_list - parse a Verilog file list</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/read_xaiger2.html">read_xaiger2 - (experimental) read XAIGER file</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/recover_names.html">recover_names - Execute a lossy mapping command and recover original netnames</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/rename.html">rename - rename object in the design</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/rmports.html">rmports - remove module ports with no connections</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/sat.html">sat - solve a SAT problem in the circuit</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/scatter.html">scatter - add additional intermediate nets</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/scc.html">scc - detect strongly connected components (logic loops)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/scratchpad.html">scratchpad - get/set values in the scratchpad</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/script.html">script - execute commands from file or wire</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/select.html">select - modify and view the list of selected objects</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/setattr.html">setattr - set/unset attributes on objects</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/setenv.html">setenv - set an environment variable</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/setparam.html">setparam - set/unset parameters on objects</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/setundef.html">setundef - replace undef values with defined constants</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/share.html">share - perform sat-based resource sharing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/shell.html">shell - enter interactive command mode</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/show.html">show - generate schematics using graphviz</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/shregmap.html">shregmap - map shift registers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/sim.html">sim - simulate the circuit</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/simplemap.html">simplemap - mapping simple coarse-grain cells</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/splice.html">splice - create explicit splicing cells</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/splitcells.html">splitcells - split up multi-bit cells</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/splitnets.html">splitnets - split up multi-bit nets</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/sta.html">sta - perform static timing analysis</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/stat.html">stat - print some statistics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/submod.html">submod - moving part of a module to a new submodule</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/supercover.html">supercover - add hi/lo cover cells for each wire bit</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/synth.html">synth - generic synthesis script</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/synth_achronix.html">synth_achronix - synthesis for Achronix Speedster22i FPGAs.</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/synth_anlogic.html">synth_anlogic - synthesis for Anlogic FPGAs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/synth_coolrunner2.html">synth_coolrunner2 - synthesis for Xilinx Coolrunner-II CPLDs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/synth_easic.html">synth_easic - synthesis for eASIC platform</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/synth_ecp5.html">synth_ecp5 - synthesis for ECP5 FPGAs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/synth_efinix.html">synth_efinix - synthesis for Efinix FPGAs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/synth_fabulous.html">synth_fabulous - FABulous synthesis script</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/synth_gatemate.html">synth_gatemate - synthesis for Cologne Chip GateMate FPGAs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/synth_gowin.html">synth_gowin - synthesis for Gowin FPGAs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/synth_greenpak4.html">synth_greenpak4 - synthesis for GreenPAK4 FPGAs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/synth_ice40.html">synth_ice40 - synthesis for iCE40 FPGAs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/synth_intel.html">synth_intel - synthesis for Intel (Altera) FPGAs.</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/synth_intel_alm.html">synth_intel_alm - synthesis for ALM-based Intel (Altera) FPGAs.</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/synth_lattice.html">synth_lattice - synthesis for Lattice FPGAs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/synth_microchip.html">synth_microchip - synthesis for Microchip FPGAs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/synth_nanoxplore.html">synth_nanoxplore - synthesis for NanoXplore FPGAs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/synth_nexus.html">synth_nexus - synthesis for Lattice Nexus FPGAs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/synth_quicklogic.html">synth_quicklogic - Synthesis for QuickLogic FPGAs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/synth_sf2.html">synth_sf2 - synthesis for SmartFusion2 and IGLOO2 FPGAs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/synth_xilinx.html">synth_xilinx - synthesis for Xilinx FPGAs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/synthprop.html">synthprop - synthesize SVA properties</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/tcl.html">tcl - execute a TCL script file</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/techmap.html">techmap - generic technology mapper</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/tee.html">tee - redirect command output to file</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/test_abcloop.html">test_abcloop - automatically test handling of loops in abc command</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/test_autotb.html">test_autotb - generate simple test benches</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/test_cell.html">test_cell - automatically test the implementation of a cell type</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/test_generic.html">test_generic - test the generic compute graph</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/test_pmgen.html">test_pmgen - test pass for pmgen</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/test_select.html">test_select - call internal selection methods on design for testing purposes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/timeest.html">timeest - estimate timing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/torder.html">torder - print cells in topological order</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/trace.html">trace - redirect command output to file</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/tribuf.html">tribuf - infer tri-state buffers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/uniquify.html">uniquify - create unique copies of modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/verific.html">verific - load Verilog and VHDL designs using Verific</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/verilog_defaults.html">verilog_defaults - set default options for read_verilog</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/verilog_defines.html">verilog_defines - define and undefine verilog defines</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/viz.html">viz - visualize data flow graph</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/wbflip.html">wbflip - flip the whitebox attribute</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/wrapcell.html">wrapcell - wrap individual cells into new modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/wreduce.html">wreduce - reduce the word size of operations if possible</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/write_aiger.html">write_aiger - write design to AIGER file</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/write_aiger2.html">write_aiger2 - (experimental) write design to AIGER file</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/write_blif.html">write_blif - write design to BLIF file</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/write_btor.html">write_btor - write design to BTOR file</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/write_cxxrtl.html">write_cxxrtl - convert design to C++ RTL simulation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/write_edif.html">write_edif - write design to EDIF netlist file</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/write_file.html">write_file - write a text to a file</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/write_firrtl.html">write_firrtl - write design to a FIRRTL file</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/write_functional_cxx.html">write_functional_cxx - convert design to C++ using the functional backend</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/write_functional_rosette.html">write_functional_rosette - Generate Rosette compatible Racket from Functional IR</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/write_functional_smt2.html">write_functional_smt2 - Generate SMT-LIB from Functional IR</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/write_intersynth.html">write_intersynth - write design to InterSynth netlist file</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/write_jny.html">write_jny - generate design metadata</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/write_json.html">write_json - write design to a JSON file</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/write_rtlil.html">write_rtlil - write design to RTLIL file</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/write_simplec.html">write_simplec - convert design to simple C code</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/write_smt2.html">write_smt2 - write design to SMT-LIBv2 file</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/write_smv.html">write_smv - write design to SMV file</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/write_spice.html">write_spice - write design to SPICE netlist file</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/write_table.html">write_table - write design as connectivity table</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/write_verilog.html">write_verilog - write design to Verilog file</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/write_xaiger.html">write_xaiger - write design to XAIGER file</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/write_xaiger2.html">write_xaiger2 - (experimental) write module to XAIGER file</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/xilinx_dffopt.html">xilinx_dffopt - Xilinx: optimize FF control signal usage</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/xilinx_dsp.html">xilinx_dsp - Xilinx: pack resources into DSPs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/xilinx_srl.html">xilinx_srl - Xilinx shift register extraction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/xprop.html">xprop - formal x propagation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cmd/zinit.html">zinit - add inverters so all FF are zero-initialized</a></li>
</ul>
</li>
</ul>

</div>

<div
  id="furo-sidebar-ad-placement"
  class="flat"
  data-ea-publisher="readthedocs"
  data-ea-type="readthedocs-sidebar"
  data-ea-manual="true"
></div>
</div>



      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          <div class="view-this-page">
  <a class="muted-link" href="https://github.com/YosysHQ/yosys/blob/main/docs/source/using_yosys/synthesis/memory.rst?plain=true" title="View this page">
    <svg><use href="#svg-eye"></use></svg>
    <span class="visually-hidden">View this page</span>
  </a>
</div><div class="edit-this-page">
  <a class="muted-link" href="https://github.com/YosysHQ/yosys/edit/main/docs/source/using_yosys/synthesis/memory.rst" title="Edit this page">
    <svg><use href="#svg-pencil"></use></svg>
    <span class="visually-hidden">Edit this page</span>
  </a>
</div><div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
              <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main" id="furo-main-content">
          <section id="memory-handling">
<h1>Memory handling<a class="headerlink" href="#memory-handling" title="Link to this heading">¶</a></h1>
<section id="the-memory-command">
<h2>The <a class="reference internal" href="../../cmd/memory.html#cmd-memory" title="translate memories to basic cells"><code class="xref cmd cmd-ref docutils literal notranslate"><span class="pre">memory</span></code></a> command<a class="headerlink" href="#the-memory-command" title="Link to this heading">¶</a></h2>
<p>In the RTL netlist, memory reads and writes are individual cells. This makes
consolidating the number of ports for a memory easier. The <a class="reference internal" href="../../cmd/memory.html#cmd-memory" title="translate memories to basic cells"><code class="xref cmd cmd-ref docutils literal notranslate"><span class="pre">memory</span></code></a> pass
transforms memories to an implementation. Per default that is logic for address
decoders and registers. It also is a macro command that calls the other common
<code class="docutils literal notranslate"><span class="pre">memory_*</span></code> passes in a sensible order:</p>
<div class="literal-block-wrapper docutils container" id="id4">
<div class="code-block-caption"><span class="caption-number">Listing 33 </span><span class="caption-text">Passes called by <a class="reference internal" href="../../cmd/memory.html#cmd-memory" title="translate memories to basic cells"><code class="xref cmd cmd-ref docutils literal notranslate"><span class="pre">memory</span></code></a></span><a class="headerlink" href="#id4" title="Link to this code">¶</a></div>
<div class="highlight-yoscrypt notranslate"><div class="highlight"><pre><span></span><span class="k">opt_mem</span>
<span class="k">opt_mem_priority</span>
<span class="k">opt_mem_feedback</span>
<span class="k">memory_bmux2rom</span>
<span class="k">memory_dff</span>
<span class="k">opt_clean</span>
<span class="k">memory_share</span>
<span class="k">opt_mem_widen</span>
<span class="k">memory_memx</span><span class="w">                         </span><span class="c1">(when called with -memx)</span>
<span class="k">opt_clean</span>
<span class="k">memory_collect</span>
<span class="k">memory_bram</span><span class="w"> </span><span class="na">-rules</span><span class="w"> </span><span class="n">&lt;bram_rules&gt;</span><span class="w">     </span><span class="c1">(when called with -bram)</span>
<span class="k">memory_map</span><span class="w">                          </span><span class="c1">(skipped if called with -nomap)</span>
</pre></div>
</div>
</div>
<p>Some quick notes:</p>
<ul class="simple">
<li><p><a class="reference internal" href="../../cmd/memory_dff.html#cmd-memory_dff" title="merge input/output DFFs into memory read ports"><code class="xref cmd cmd-ref docutils literal notranslate"><span class="pre">memory_dff</span></code></a> merges registers into the memory read- and write cells.</p></li>
<li><p><a class="reference internal" href="../../cmd/memory_collect.html#cmd-memory_collect" title="creating multi-port memory cells"><code class="xref cmd cmd-ref docutils literal notranslate"><span class="pre">memory_collect</span></code></a> collects all read and write cells for a memory and
transforms them into one multi-port memory cell.</p></li>
<li><p><a class="reference internal" href="../../cmd/memory_map.html#cmd-memory_map" title="translate multiport memories to basic cells"><code class="xref cmd cmd-ref docutils literal notranslate"><span class="pre">memory_map</span></code></a> takes the multi-port memory cell and transforms it to address
decoder logic and registers.</p></li>
</ul>
<p>For more information about <a class="reference internal" href="../../cmd/memory.html#cmd-memory" title="translate memories to basic cells"><code class="xref cmd cmd-ref docutils literal notranslate"><span class="pre">memory</span></code></a>, such as disabling certain sub commands, see
<a class="reference internal" href="../../cmd/memory.html"><span class="doc">memory - translate memories to basic cells</span></a>.</p>
<section id="example">
<h3>Example<a class="headerlink" href="#example" title="Link to this heading">¶</a></h3>
<p><a class="reference external" href="https://github.com/YosysHQ/yosys/tree/main/docs/source/code_examples/synth_flow"><code class="file docutils literal notranslate"><span class="pre">docs/source/code_examples/synth_flow</span></code></a>.</p>
<figure class="align-default">
<img alt="../../_images/memory_01.svg" class="width-helper invert-helper" src="../../_images/memory_01.svg" />
</figure>
<div class="literal-block-wrapper docutils container" id="id5">
<div class="code-block-caption"><span class="caption-number">Listing 34 </span><span class="caption-text"><code class="file docutils literal notranslate"><span class="pre">memory_01.ys</span></code></span><a class="headerlink" href="#id5" title="Link to this code">¶</a></div>
<div class="highlight-yoscrypt notranslate"><div class="highlight"><pre><span></span><span class="k">read_verilog</span><span class="w"> </span><span class="n">memory_01.v</span>
<span class="k">hierarchy</span><span class="w"> </span><span class="na">-check</span><span class="w"> </span><span class="na">-top</span><span class="w"> </span><span class="n">test</span>
<span class="k">proc</span><span class="nc">;;</span><span class="w"> </span><span class="k">memory</span><span class="o">;</span><span class="w"> </span><span class="k">opt</span>
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="id6">
<div class="code-block-caption"><span class="caption-number">Listing 35 </span><span class="caption-text"><code class="file docutils literal notranslate"><span class="pre">memory_01.v</span></code></span><a class="headerlink" href="#id6" title="Link to this code">¶</a></div>
<div class="highlight-verilog notranslate"><div class="highlight"><pre><span></span><span class="k">module</span><span class="w"> </span><span class="n">test</span><span class="p">(</span><span class="k">input</span><span class="w">      </span><span class="n">CLK</span><span class="p">,</span><span class="w"> </span><span class="n">ADDR</span><span class="p">,</span>
<span class="w">            </span><span class="k">input</span><span class="w">      </span><span class="p">[</span><span class="mh">7</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">DIN</span><span class="p">,</span>
<span class="w">	    </span><span class="k">output</span><span class="w"> </span><span class="kt">reg</span><span class="w"> </span><span class="p">[</span><span class="mh">7</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">DOUT</span><span class="p">);</span>
<span class="w">    </span><span class="kt">reg</span><span class="w"> </span><span class="p">[</span><span class="mh">7</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">mem</span><span class="w"> </span><span class="p">[</span><span class="mh">0</span><span class="o">:</span><span class="mh">1</span><span class="p">];</span>
<span class="w">    </span><span class="k">always</span><span class="w"> </span><span class="p">@(</span><span class="k">posedge</span><span class="w"> </span><span class="n">CLK</span><span class="p">)</span><span class="w"> </span><span class="k">begin</span>
<span class="w">        </span><span class="n">mem</span><span class="p">[</span><span class="n">ADDR</span><span class="p">]</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">DIN</span><span class="p">;</span>
<span class="w">	</span><span class="n">DOUT</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">mem</span><span class="p">[</span><span class="n">ADDR</span><span class="p">];</span>
<span class="w">    </span><span class="k">end</span>
<span class="k">endmodule</span>
</pre></div>
</div>
</div>
<figure class="align-default">
<img alt="../../_images/memory_02.svg" class="width-helper invert-helper" src="../../_images/memory_02.svg" />
</figure>
<div class="literal-block-wrapper docutils container" id="id7">
<div class="code-block-caption"><span class="caption-number">Listing 36 </span><span class="caption-text"><code class="file docutils literal notranslate"><span class="pre">memory_02.v</span></code></span><a class="headerlink" href="#id7" title="Link to this code">¶</a></div>
<div class="highlight-verilog notranslate"><div class="highlight"><pre><span></span><span class="k">module</span><span class="w"> </span><span class="n">test</span><span class="p">(</span>
<span class="w">    </span><span class="k">input</span><span class="w">             </span><span class="n">WR1_CLK</span><span class="p">,</span><span class="w">  </span><span class="n">WR2_CLK</span><span class="p">,</span>
<span class="w">    </span><span class="k">input</span><span class="w">             </span><span class="n">WR1_WEN</span><span class="p">,</span><span class="w">  </span><span class="n">WR2_WEN</span><span class="p">,</span>
<span class="w">    </span><span class="k">input</span><span class="w">      </span><span class="p">[</span><span class="mh">7</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w">  </span><span class="n">WR1_ADDR</span><span class="p">,</span><span class="w"> </span><span class="n">WR2_ADDR</span><span class="p">,</span>
<span class="w">    </span><span class="k">input</span><span class="w">      </span><span class="p">[</span><span class="mh">7</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w">  </span><span class="n">WR1_DATA</span><span class="p">,</span><span class="w"> </span><span class="n">WR2_DATA</span><span class="p">,</span>
<span class="w">    </span><span class="k">input</span><span class="w">             </span><span class="n">RD1_CLK</span><span class="p">,</span><span class="w">  </span><span class="n">RD2_CLK</span><span class="p">,</span>
<span class="w">    </span><span class="k">input</span><span class="w">      </span><span class="p">[</span><span class="mh">7</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w">  </span><span class="n">RD1_ADDR</span><span class="p">,</span><span class="w"> </span><span class="n">RD2_ADDR</span><span class="p">,</span>
<span class="w">    </span><span class="k">output</span><span class="w"> </span><span class="kt">reg</span><span class="w"> </span><span class="p">[</span><span class="mh">7</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w">  </span><span class="n">RD1_DATA</span><span class="p">,</span><span class="w"> </span><span class="n">RD2_DATA</span>
<span class="p">);</span>

<span class="kt">reg</span><span class="w"> </span><span class="p">[</span><span class="mh">7</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">memory</span><span class="w"> </span><span class="p">[</span><span class="mh">0</span><span class="o">:</span><span class="mh">255</span><span class="p">];</span>

<span class="k">always</span><span class="w"> </span><span class="p">@(</span><span class="k">posedge</span><span class="w"> </span><span class="n">WR1_CLK</span><span class="p">)</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">WR1_WEN</span><span class="p">)</span>
<span class="w">        </span><span class="n">memory</span><span class="p">[</span><span class="n">WR1_ADDR</span><span class="p">]</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">WR1_DATA</span><span class="p">;</span>

<span class="k">always</span><span class="w"> </span><span class="p">@(</span><span class="k">posedge</span><span class="w"> </span><span class="n">WR2_CLK</span><span class="p">)</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">WR2_WEN</span><span class="p">)</span>
<span class="w">        </span><span class="n">memory</span><span class="p">[</span><span class="n">WR2_ADDR</span><span class="p">]</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">WR2_DATA</span><span class="p">;</span>

<span class="k">always</span><span class="w"> </span><span class="p">@(</span><span class="k">posedge</span><span class="w"> </span><span class="n">RD1_CLK</span><span class="p">)</span>
<span class="w">    </span><span class="n">RD1_DATA</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">memory</span><span class="p">[</span><span class="n">RD1_ADDR</span><span class="p">];</span>

<span class="k">always</span><span class="w"> </span><span class="p">@(</span><span class="k">posedge</span><span class="w"> </span><span class="n">RD2_CLK</span><span class="p">)</span>
<span class="w">    </span><span class="n">RD2_DATA</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">memory</span><span class="p">[</span><span class="n">RD2_ADDR</span><span class="p">];</span>

<span class="k">endmodule</span>
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="id8">
<div class="code-block-caption"><span class="caption-number">Listing 37 </span><span class="caption-text"><code class="file docutils literal notranslate"><span class="pre">memory_02.ys</span></code></span><a class="headerlink" href="#id8" title="Link to this code">¶</a></div>
<div class="highlight-yoscrypt notranslate"><div class="highlight"><pre><span></span><span class="k">read_verilog</span><span class="w"> </span><span class="n">memory_02.v</span>
<span class="k">hierarchy</span><span class="w"> </span><span class="na">-check</span><span class="w"> </span><span class="na">-top</span><span class="w"> </span><span class="n">test</span>
<span class="k">proc</span><span class="nc">;;</span><span class="w"> </span><span class="k">memory</span><span class="w"> </span><span class="na">-nomap</span>
<span class="k">opt</span><span class="w"> </span><span class="na">-mux_undef</span><span class="w"> </span><span class="na">-mux_bool</span>
</pre></div>
</div>
</div>
</section>
</section>
<section id="memory-mapping">
<span id="memory-map"></span><h2>Memory mapping<a class="headerlink" href="#memory-mapping" title="Link to this heading">¶</a></h2>
<p>Usually it is preferred to use architecture-specific RAM resources for memory.
For example:</p>
<div class="highlight-yoscrypt notranslate"><div class="highlight"><pre><span></span><span class="k">memory</span><span class="w"> </span><span class="na">-nomap</span>
<span class="k">memory_libmap</span><span class="w"> </span><span class="na">-lib</span><span class="w"> </span><span class="n">my_memory_map.txt</span>
<span class="k">techmap</span><span class="w"> </span><span class="na">-map</span><span class="w"> </span><span class="n">my_memory_map.v</span>
<span class="k">memory_map</span>
</pre></div>
</div>
<p><a class="reference internal" href="../../cmd/memory_libmap.html#cmd-memory_libmap" title="map memories to cells"><code class="xref cmd cmd-ref docutils literal notranslate"><span class="pre">memory_libmap</span></code></a> attempts to convert memory cells (<a class="reference internal" href="../../cell/word_mem.html#mem.$mem_v2" title="mem::$mem_v2"><code class="xref cell cell-ref docutils literal notranslate"><span class="pre">$mem_v2</span></code></a> etc) into hardware
supported memory using a provided library (<code class="file docutils literal notranslate"><span class="pre">my_memory_map.txt</span></code> in the
example above).  Where necessary, emulation logic is added to ensure functional
equivalence before and after this conversion. <code class="code highlight yoscrypt docutils literal highlight-yoscrypt"><span class="k">techmap</span><span class="w"> </span><span class="na">-map</span>
<span class="k">my_memory_map</span><span class="c">.</span><span class="n">v</span></code> then uses <a class="reference internal" href="../../cmd/techmap.html#cmd-techmap" title="generic technology mapper"><code class="xref cmd cmd-ref docutils literal notranslate"><span class="pre">techmap</span></code></a> to map to hardware primitives. Any leftover
memory cells unable to be converted are then picked up by <a class="reference internal" href="../../cmd/memory_map.html#cmd-memory_map" title="translate multiport memories to basic cells"><code class="xref cmd cmd-ref docutils literal notranslate"><span class="pre">memory_map</span></code></a> and
mapped to DFFs and address decoders.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>More information about what mapping options are available and associated
costs of each can be found by enabling debug outputs.  This can be done with
the <a class="reference internal" href="../../cmd/debug.html#cmd-debug" title="run command with debug log messages enabled"><code class="xref cmd cmd-ref docutils literal notranslate"><span class="pre">debug</span></code></a> command, or by using the <code class="docutils literal notranslate"><span class="pre">-g</span></code> flag when calling Yosys to
globally enable debug messages.</p>
</div>
<p>For more on the lib format for <a class="reference internal" href="../../cmd/memory_libmap.html#cmd-memory_libmap" title="map memories to cells"><code class="xref cmd cmd-ref docutils literal notranslate"><span class="pre">memory_libmap</span></code></a>, see
<a class="reference external" href="https://github.com/YosysHQ/yosys/blob/main/passes/memory/memlib.md">passes/memory/memlib.md</a></p>
</section>
<section id="supported-memory-patterns">
<h2>Supported memory patterns<a class="headerlink" href="#supported-memory-patterns" title="Link to this heading">¶</a></h2>
<p>Note that not all supported patterns are included in this document, of
particular note is that combinations of multiple patterns should generally work.
For example, <a class="reference internal" href="#wbe">wbe</a> could be used in conjunction with any of the simple dual
port (SDP) models.  In general if a hardware memory definition does not support
a given configuration, additional logic will be instantiated to guarantee
behaviour is consistent with simulation.</p>
<section id="notes">
<h3>Notes<a class="headerlink" href="#notes" title="Link to this heading">¶</a></h3>
<section id="memory-kind-selection">
<h4>Memory kind selection<a class="headerlink" href="#memory-kind-selection" title="Link to this heading">¶</a></h4>
<p>The memory inference code will automatically pick target memory primitive based
on memory geometry and features used.  Depending on the target, there can be up
to four memory primitive classes available for selection:</p>
<ul class="simple">
<li><p>FF RAM (aka logic): no hardware primitive used, memory lowered to a bunch of
FFs and multiplexers</p>
<ul>
<li><p>Can handle arbitrary number of write ports, as long as all write ports are
in the same clock domain</p></li>
<li><p>Can handle arbitrary number and kind of read ports</p></li>
</ul>
</li>
<li><p>LUT RAM (aka distributed RAM): uses LUT storage as RAM</p>
<ul>
<li><p>Supported on most FPGAs (with notable exception of ice40)</p></li>
<li><p>Usually has one synchronous write port, one or more asynchronous read ports</p></li>
<li><p>Small</p></li>
<li><p>Will never be used for ROMs (lowering to plain LUTs is always better)</p></li>
</ul>
</li>
<li><p>Block RAM: dedicated memory tiles</p>
<ul>
<li><p>Supported on basically all FPGAs</p></li>
<li><p>Supports only synchronous reads</p></li>
<li><p>Two ports with separate clocks</p></li>
<li><p>Usually supports true dual port (with notable exception of ice40 that only
supports SDP)</p></li>
<li><p>Usually supports asymmetric memories and per-byte write enables</p></li>
<li><p>Several kilobits in size</p></li>
</ul>
</li>
<li><p>Huge RAM:</p>
<ul>
<li><p>Only supported on several targets:</p>
<ul>
<li><p>Some Xilinx UltraScale devices (UltraRAM)</p>
<ul>
<li><p>Two ports, both with mutually exclusive synchronous read and write</p></li>
<li><p>Single clock</p></li>
<li><p>Initial data must be all-0</p></li>
</ul>
</li>
<li><p>Some ice40 devices (SPRAM)</p>
<ul>
<li><p>Single port with mutually exclusive synchronous read and write</p></li>
<li><p>Does not support initial data</p></li>
</ul>
</li>
<li><p>Nexus (large RAM)</p>
<ul>
<li><p>Two ports, both with mutually exclusive synchronous read and write</p></li>
<li><p>Single clock</p></li>
</ul>
</li>
</ul>
</li>
<li><p>Will not be automatically selected by memory inference code, needs explicit
opt-in via ram_style attribute</p></li>
</ul>
</li>
</ul>
<p>In general, you can expect the automatic selection process to work roughly like
this:</p>
<ul class="simple">
<li><p>If any read port is asynchronous, only LUT RAM (or FF RAM) can be used.</p></li>
<li><p>If there is more than one write port, only block RAM can be used, and this
needs to be a hardware-supported true dual port pattern</p>
<ul>
<li><p>… unless all write ports are in the same clock domain, in which case FF RAM
can also be used, but this is generally not what you want for anything but
really small memories</p></li>
</ul>
</li>
<li><p>Otherwise, either FF RAM, LUT RAM, or block RAM will be used, depending on
memory size</p></li>
</ul>
<p>This process can be overridden by attaching a ram_style attribute to the memory:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">(*</span> <span class="pre">ram_style</span> <span class="pre">=</span> <span class="pre">&quot;logic&quot;</span> <span class="pre">*)</span></code> selects FF RAM</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">(*</span> <span class="pre">ram_style</span> <span class="pre">=</span> <span class="pre">&quot;distributed&quot;</span> <span class="pre">*)</span></code> selects LUT RAM</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">(*</span> <span class="pre">ram_style</span> <span class="pre">=</span> <span class="pre">&quot;block&quot;</span> <span class="pre">*)</span></code> selects block RAM</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">(*</span> <span class="pre">ram_style</span> <span class="pre">=</span> <span class="pre">&quot;huge&quot;</span> <span class="pre">*)</span></code> selects huge RAM</p></li>
</ul>
<p>It is an error if this override cannot be realized for the given target.</p>
<p>Many alternate spellings of the attribute are also accepted, for compatibility
with other software.</p>
</section>
<section id="initial-data">
<h4>Initial data<a class="headerlink" href="#initial-data" title="Link to this heading">¶</a></h4>
<p>Most FPGA targets support initializing all kinds of memory to user-provided
values.  If explicit initialization is not used the initial memory value is
undefined.  Initial data can be provided by either initial statements writing
memory cells one by one of <code class="docutils literal notranslate"><span class="pre">$readmemh</span></code> or <code class="docutils literal notranslate"><span class="pre">$readmemb</span></code> system tasks.  For an
example pattern, see <a class="reference internal" href="#sr-init">sr_init</a>.</p>
</section>
<section id="write-port-with-byte-enables">
<span id="wbe"></span><h4>Write port with byte enables<a class="headerlink" href="#write-port-with-byte-enables" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p>Byte enables can be used with any supported pattern</p></li>
<li><p>To ensure that multiple writes will be merged into one port, they need to have
disjoint bit ranges, have the same address, and the same clock</p></li>
<li><p>Any write enable granularity will be accepted (down to per-bit write enables),
but using smaller granularity than natively supported by the target is very
likely to be inefficient (eg. using 4-bit bytes on ECP5 will result in either
padding the bytes with 5 dummy bits to native 9-bit units or splitting the RAM
into two block RAMs)</p></li>
</ul>
<div class="highlight-verilog notranslate"><div class="highlight"><pre><span></span><span class="kt">reg</span><span class="w"> </span><span class="p">[</span><span class="mh">31</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">mem</span><span class="w"> </span><span class="p">[</span><span class="mh">2</span><span class="o">**</span><span class="n">ADDR_WIDTH</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mh">1</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="mh">0</span><span class="p">];</span>

<span class="k">always</span><span class="w"> </span><span class="p">@(</span><span class="k">posedge</span><span class="w"> </span><span class="n">clk</span><span class="p">)</span><span class="w"> </span><span class="k">begin</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">write_enable</span><span class="p">[</span><span class="mh">0</span><span class="p">])</span>
<span class="w">                </span><span class="n">mem</span><span class="p">[</span><span class="n">write_addr</span><span class="p">][</span><span class="mh">7</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">write_data</span><span class="p">[</span><span class="mh">7</span><span class="o">:</span><span class="mh">0</span><span class="p">];</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">write_enable</span><span class="p">[</span><span class="mh">1</span><span class="p">])</span>
<span class="w">                </span><span class="n">mem</span><span class="p">[</span><span class="n">write_addr</span><span class="p">][</span><span class="mh">15</span><span class="o">:</span><span class="mh">8</span><span class="p">]</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">write_data</span><span class="p">[</span><span class="mh">15</span><span class="o">:</span><span class="mh">8</span><span class="p">];</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">write_enable</span><span class="p">[</span><span class="mh">2</span><span class="p">])</span>
<span class="w">                </span><span class="n">mem</span><span class="p">[</span><span class="n">write_addr</span><span class="p">][</span><span class="mh">23</span><span class="o">:</span><span class="mh">16</span><span class="p">]</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">write_data</span><span class="p">[</span><span class="mh">23</span><span class="o">:</span><span class="mh">16</span><span class="p">];</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">write_enable</span><span class="p">[</span><span class="mh">3</span><span class="p">])</span>
<span class="w">                </span><span class="n">mem</span><span class="p">[</span><span class="n">write_addr</span><span class="p">][</span><span class="mh">31</span><span class="o">:</span><span class="mh">24</span><span class="p">]</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">write_data</span><span class="p">[</span><span class="mh">31</span><span class="o">:</span><span class="mh">24</span><span class="p">];</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">read_enable</span><span class="p">)</span>
<span class="w">                </span><span class="n">read_data</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">mem</span><span class="p">[</span><span class="n">read_addr</span><span class="p">];</span>
<span class="k">end</span>
</pre></div>
</div>
</section>
</section>
<section id="simple-dual-port-sdp-memory-patterns">
<h3>Simple dual port (SDP) memory patterns<a class="headerlink" href="#simple-dual-port-sdp-memory-patterns" title="Link to this heading">¶</a></h3>
<section id="asynchronous-read-sdp">
<h4>Asynchronous-read SDP<a class="headerlink" href="#asynchronous-read-sdp" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p>This will result in LUT RAM on supported targets</p></li>
</ul>
<div class="highlight-verilog notranslate"><div class="highlight"><pre><span></span><span class="kt">reg</span><span class="w"> </span><span class="p">[</span><span class="n">DATA_WIDTH</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mh">1</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">mem</span><span class="w"> </span><span class="p">[</span><span class="mh">2</span><span class="o">**</span><span class="n">ADDR_WIDTH</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mh">1</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="mh">0</span><span class="p">];</span>
<span class="k">always</span><span class="w"> </span><span class="p">@(</span><span class="k">posedge</span><span class="w"> </span><span class="n">clk</span><span class="p">)</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">write_enable</span><span class="p">)</span>
<span class="w">                </span><span class="n">mem</span><span class="p">[</span><span class="n">write_addr</span><span class="p">]</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">write_data</span><span class="p">;</span>
<span class="k">assign</span><span class="w"> </span><span class="n">read_data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mem</span><span class="p">[</span><span class="n">read_addr</span><span class="p">];</span>
</pre></div>
</div>
</section>
<section id="synchronous-sdp-with-clock-domain-crossing">
<h4>Synchronous SDP with clock domain crossing<a class="headerlink" href="#synchronous-sdp-with-clock-domain-crossing" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p>Will result in block RAM or LUT RAM depending on size</p></li>
<li><p>No behavior guarantees in case of simultaneous read and write to the same
address</p></li>
</ul>
<div class="highlight-verilog notranslate"><div class="highlight"><pre><span></span><span class="kt">reg</span><span class="w"> </span><span class="p">[</span><span class="n">DATA_WIDTH</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mh">1</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">mem</span><span class="w"> </span><span class="p">[</span><span class="mh">2</span><span class="o">**</span><span class="n">ADDR_WIDTH</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mh">1</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="mh">0</span><span class="p">];</span>

<span class="k">always</span><span class="w"> </span><span class="p">@(</span><span class="k">posedge</span><span class="w"> </span><span class="n">write_clk</span><span class="p">)</span><span class="w"> </span><span class="k">begin</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">write_enable</span><span class="p">)</span>
<span class="w">                </span><span class="n">mem</span><span class="p">[</span><span class="n">write_addr</span><span class="p">]</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">write_data</span><span class="p">;</span>
<span class="k">end</span>

<span class="k">always</span><span class="w"> </span><span class="p">@(</span><span class="k">posedge</span><span class="w"> </span><span class="n">read_clk</span><span class="p">)</span><span class="w"> </span><span class="k">begin</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">read_enable</span><span class="p">)</span>
<span class="w">                </span><span class="n">read_data</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">mem</span><span class="p">[</span><span class="n">read_addr</span><span class="p">];</span>
<span class="k">end</span>
</pre></div>
</div>
</section>
<section id="synchronous-sdp-read-first">
<h4>Synchronous SDP read first<a class="headerlink" href="#synchronous-sdp-read-first" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p>The read and write parts can be in the same or different processes.</p></li>
<li><p>Will result in block RAM or LUT RAM depending on size</p></li>
<li><p>As long as the same clock is used for both, yosys will ensure read-first
behavior.  This may require extra circuitry on some targets for block RAM.  If
this is not necessary, use one of the patterns below.</p></li>
</ul>
<div class="highlight-verilog notranslate"><div class="highlight"><pre><span></span><span class="kt">reg</span><span class="w"> </span><span class="p">[</span><span class="n">DATA_WIDTH</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mh">1</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">mem</span><span class="w"> </span><span class="p">[</span><span class="mh">2</span><span class="o">**</span><span class="n">ADDR_WIDTH</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mh">1</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="mh">0</span><span class="p">];</span>

<span class="k">always</span><span class="w"> </span><span class="p">@(</span><span class="k">posedge</span><span class="w"> </span><span class="n">clk</span><span class="p">)</span><span class="w"> </span><span class="k">begin</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">write_enable</span><span class="p">)</span>
<span class="w">                </span><span class="n">mem</span><span class="p">[</span><span class="n">write_addr</span><span class="p">]</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">write_data</span><span class="p">;</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">read_enable</span><span class="p">)</span>
<span class="w">                </span><span class="n">read_data</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">mem</span><span class="p">[</span><span class="n">read_addr</span><span class="p">];</span>
<span class="k">end</span>
</pre></div>
</div>
</section>
<section id="synchronous-sdp-with-undefined-collision-behavior">
<span id="no-rw-check"></span><h4>Synchronous SDP with undefined collision behavior<a class="headerlink" href="#synchronous-sdp-with-undefined-collision-behavior" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p>Like above, but the read value is undefined when read and write ports target
the same address in the same cycle</p></li>
</ul>
<div class="highlight-verilog notranslate"><div class="highlight"><pre><span></span><span class="kt">reg</span><span class="w"> </span><span class="p">[</span><span class="n">DATA_WIDTH</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mh">1</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">mem</span><span class="w"> </span><span class="p">[</span><span class="mh">2</span><span class="o">**</span><span class="n">ADDR_WIDTH</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mh">1</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="mh">0</span><span class="p">];</span>

<span class="k">always</span><span class="w"> </span><span class="p">@(</span><span class="k">posedge</span><span class="w"> </span><span class="n">clk</span><span class="p">)</span><span class="w"> </span><span class="k">begin</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">write_enable</span><span class="p">)</span>
<span class="w">                </span><span class="n">mem</span><span class="p">[</span><span class="n">write_addr</span><span class="p">]</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">write_data</span><span class="p">;</span>

<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">read_enable</span><span class="p">)</span><span class="w"> </span><span class="k">begin</span>
<span class="w">                </span><span class="n">read_data</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">mem</span><span class="p">[</span><span class="n">read_addr</span><span class="p">];</span>

<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">write_enable</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">read_addr</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">write_addr</span><span class="p">)</span>
<span class="w">                </span><span class="c1">// this if block</span>
<span class="w">                </span><span class="n">read_data</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="m">&#39;x</span><span class="p">;</span>
<span class="w">        </span><span class="k">end</span>
<span class="k">end</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Or below, using the no_rw_check attribute</p></li>
</ul>
<div class="highlight-verilog notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="o">*</span><span class="w"> </span><span class="n">no_rw_check</span><span class="w"> </span><span class="o">*</span><span class="p">)</span>
<span class="kt">reg</span><span class="w"> </span><span class="p">[</span><span class="n">DATA_WIDTH</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mh">1</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">mem</span><span class="w"> </span><span class="p">[</span><span class="mh">2</span><span class="o">**</span><span class="n">ADDR_WIDTH</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mh">1</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="mh">0</span><span class="p">];</span>

<span class="k">always</span><span class="w"> </span><span class="p">@(</span><span class="k">posedge</span><span class="w"> </span><span class="n">clk</span><span class="p">)</span><span class="w"> </span><span class="k">begin</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">write_enable</span><span class="p">)</span>
<span class="w">                </span><span class="n">mem</span><span class="p">[</span><span class="n">write_addr</span><span class="p">]</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">write_data</span><span class="p">;</span>

<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">read_enable</span><span class="p">)</span>
<span class="w">                </span><span class="n">read_data</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">mem</span><span class="p">[</span><span class="n">read_addr</span><span class="p">];</span>
<span class="k">end</span>
</pre></div>
</div>
</section>
<section id="synchronous-sdp-with-write-first-behavior">
<span id="sdp-wf"></span><h4>Synchronous SDP with write-first behavior<a class="headerlink" href="#synchronous-sdp-with-write-first-behavior" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p>Will result in block RAM or LUT RAM depending on size</p></li>
<li><p>May use additional circuitry for block RAM if write-first is not natively
supported. Will always use additional circuitry for LUT RAM.</p></li>
</ul>
<div class="highlight-verilog notranslate"><div class="highlight"><pre><span></span><span class="kt">reg</span><span class="w"> </span><span class="p">[</span><span class="n">DATA_WIDTH</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mh">1</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">mem</span><span class="w"> </span><span class="p">[</span><span class="mh">2</span><span class="o">**</span><span class="n">ADDR_WIDTH</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mh">1</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="mh">0</span><span class="p">];</span>

<span class="k">always</span><span class="w"> </span><span class="p">@(</span><span class="k">posedge</span><span class="w"> </span><span class="n">clk</span><span class="p">)</span><span class="w"> </span><span class="k">begin</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">write_enable</span><span class="p">)</span>
<span class="w">                </span><span class="n">mem</span><span class="p">[</span><span class="n">write_addr</span><span class="p">]</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">write_data</span><span class="p">;</span>

<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">read_enable</span><span class="p">)</span><span class="w"> </span><span class="k">begin</span>
<span class="w">                </span><span class="n">read_data</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">mem</span><span class="p">[</span><span class="n">read_addr</span><span class="p">];</span>
<span class="w">                </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">write_enable</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">read_addr</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">write_addr</span><span class="p">)</span>
<span class="w">                        </span><span class="n">read_data</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">write_data</span><span class="p">;</span>
<span class="w">        </span><span class="k">end</span>
<span class="k">end</span>
</pre></div>
</div>
</section>
<section id="synchronous-sdp-with-write-first-behavior-alternate-pattern">
<h4>Synchronous SDP with write-first behavior (alternate pattern)<a class="headerlink" href="#synchronous-sdp-with-write-first-behavior-alternate-pattern" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p>This pattern is supported for compatibility, but is much less flexible than
the above</p></li>
</ul>
<div class="highlight-verilog notranslate"><div class="highlight"><pre><span></span><span class="kt">reg</span><span class="w"> </span><span class="p">[</span><span class="n">ADDR_WIDTH</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mh">1</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">read_addr_reg</span><span class="p">;</span>
<span class="kt">reg</span><span class="w"> </span><span class="p">[</span><span class="n">DATA_WIDTH</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mh">1</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">mem</span><span class="w"> </span><span class="p">[</span><span class="mh">2</span><span class="o">**</span><span class="n">ADDR_WIDTH</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mh">1</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="mh">0</span><span class="p">];</span>

<span class="k">always</span><span class="w"> </span><span class="p">@(</span><span class="k">posedge</span><span class="w"> </span><span class="n">clk</span><span class="p">)</span><span class="w"> </span><span class="k">begin</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">write_enable</span><span class="p">)</span>
<span class="w">                </span><span class="n">mem</span><span class="p">[</span><span class="n">write_addr</span><span class="p">]</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">write_data</span><span class="p">;</span>
<span class="w">        </span><span class="n">read_addr_reg</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">read_addr</span><span class="p">;</span>
<span class="k">end</span>

<span class="k">assign</span><span class="w"> </span><span class="n">read_data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mem</span><span class="p">[</span><span class="n">read_addr_reg</span><span class="p">];</span>
</pre></div>
</div>
</section>
</section>
<section id="single-port-ram-memory-patterns">
<h3>Single-port RAM memory patterns<a class="headerlink" href="#single-port-ram-memory-patterns" title="Link to this heading">¶</a></h3>
<section id="asynchronous-read-single-port-ram">
<h4>Asynchronous-read single-port RAM<a class="headerlink" href="#asynchronous-read-single-port-ram" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p>Will result in single-port LUT RAM on supported targets</p></li>
</ul>
<div class="highlight-verilog notranslate"><div class="highlight"><pre><span></span><span class="kt">reg</span><span class="w"> </span><span class="p">[</span><span class="n">DATA_WIDTH</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mh">1</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">mem</span><span class="w"> </span><span class="p">[</span><span class="mh">2</span><span class="o">**</span><span class="n">ADDR_WIDTH</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mh">1</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="mh">0</span><span class="p">];</span>
<span class="k">always</span><span class="w"> </span><span class="p">@(</span><span class="k">posedge</span><span class="w"> </span><span class="n">clk</span><span class="p">)</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">write_enable</span><span class="p">)</span>
<span class="w">                </span><span class="n">mem</span><span class="p">[</span><span class="n">addr</span><span class="p">]</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">write_data</span><span class="p">;</span>
<span class="k">assign</span><span class="w"> </span><span class="n">read_data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mem</span><span class="p">[</span><span class="n">addr</span><span class="p">];</span>
</pre></div>
</div>
</section>
<section id="synchronous-single-port-ram-with-mutually-exclusive-read-write">
<h4>Synchronous single-port RAM with mutually exclusive read/write<a class="headerlink" href="#synchronous-single-port-ram-with-mutually-exclusive-read-write" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p>Will result in single-port block RAM or LUT RAM depending on size</p></li>
<li><p>This is the correct pattern to infer ice40 SPRAM (with manual ram_style
selection)</p></li>
<li><p>On targets that don’t support read/write block RAM ports (eg. ice40), will
result in SDP block RAM instead</p></li>
<li><p>For block RAM, will use “NO_CHANGE” mode if available</p></li>
</ul>
<div class="highlight-verilog notranslate"><div class="highlight"><pre><span></span><span class="kt">reg</span><span class="w"> </span><span class="p">[</span><span class="n">DATA_WIDTH</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mh">1</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">mem</span><span class="w"> </span><span class="p">[</span><span class="mh">2</span><span class="o">**</span><span class="n">ADDR_WIDTH</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mh">1</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="mh">0</span><span class="p">];</span>

<span class="k">always</span><span class="w"> </span><span class="p">@(</span><span class="k">posedge</span><span class="w"> </span><span class="n">clk</span><span class="p">)</span><span class="w"> </span><span class="k">begin</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">write_enable</span><span class="p">)</span>
<span class="w">                </span><span class="n">mem</span><span class="p">[</span><span class="n">addr</span><span class="p">]</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">write_data</span><span class="p">;</span>
<span class="w">        </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">read_enable</span><span class="p">)</span>
<span class="w">                </span><span class="n">read_data</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">mem</span><span class="p">[</span><span class="n">addr</span><span class="p">];</span>
<span class="k">end</span>
</pre></div>
</div>
</section>
<section id="synchronous-single-port-ram-with-read-first-behavior">
<h4>Synchronous single-port RAM with read-first behavior<a class="headerlink" href="#synchronous-single-port-ram-with-read-first-behavior" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p>Will only result in single-port block RAM when read-first behavior is natively
supported; otherwise, SDP RAM with additional circuitry will be used</p></li>
<li><p>Many targets (Xilinx, ECP5, …) can only natively support
read-first/write-first single-port RAM (or TDP RAM) where the write_enable
signal implies the read_enable signal (ie. can never write without reading).
The memory inference code will run a simple SAT solver on the control signals
to determine if this is the case, and insert emulation circuitry if it cannot
be easily proven.</p></li>
</ul>
<div class="highlight-verilog notranslate"><div class="highlight"><pre><span></span><span class="kt">reg</span><span class="w"> </span><span class="p">[</span><span class="n">DATA_WIDTH</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mh">1</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">mem</span><span class="w"> </span><span class="p">[</span><span class="mh">2</span><span class="o">**</span><span class="n">ADDR_WIDTH</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mh">1</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="mh">0</span><span class="p">];</span>

<span class="k">always</span><span class="w"> </span><span class="p">@(</span><span class="k">posedge</span><span class="w"> </span><span class="n">clk</span><span class="p">)</span><span class="w"> </span><span class="k">begin</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">write_enable</span><span class="p">)</span>
<span class="w">                </span><span class="n">mem</span><span class="p">[</span><span class="n">addr</span><span class="p">]</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">write_data</span><span class="p">;</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">read_enable</span><span class="p">)</span>
<span class="w">                </span><span class="n">read_data</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">mem</span><span class="p">[</span><span class="n">addr</span><span class="p">];</span>
<span class="k">end</span>
</pre></div>
</div>
</section>
<section id="synchronous-single-port-ram-with-write-first-behavior">
<h4>Synchronous single-port RAM with write-first behavior<a class="headerlink" href="#synchronous-single-port-ram-with-write-first-behavior" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p>Will result in single-port block RAM or LUT RAM when supported</p></li>
<li><p>Block RAMs will require extra circuitry if write-first behavior not natively
supported</p></li>
</ul>
<div class="highlight-verilog notranslate"><div class="highlight"><pre><span></span><span class="kt">reg</span><span class="w"> </span><span class="p">[</span><span class="n">DATA_WIDTH</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mh">1</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">mem</span><span class="w"> </span><span class="p">[</span><span class="mh">2</span><span class="o">**</span><span class="n">ADDR_WIDTH</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mh">1</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="mh">0</span><span class="p">];</span>

<span class="k">always</span><span class="w"> </span><span class="p">@(</span><span class="k">posedge</span><span class="w"> </span><span class="n">clk</span><span class="p">)</span><span class="w"> </span><span class="k">begin</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">write_enable</span><span class="p">)</span>
<span class="w">                </span><span class="n">mem</span><span class="p">[</span><span class="n">addr</span><span class="p">]</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">write_data</span><span class="p">;</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">read_enable</span><span class="p">)</span>
<span class="w">                </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">write_enable</span><span class="p">)</span>
<span class="w">                        </span><span class="n">read_data</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">write_data</span><span class="p">;</span>
<span class="w">                </span><span class="k">else</span>
<span class="w">                        </span><span class="n">read_data</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">mem</span><span class="p">[</span><span class="n">addr</span><span class="p">];</span>
<span class="k">end</span>
</pre></div>
</div>
</section>
<section id="synchronous-read-port-with-initial-value">
<span id="sr-init"></span><h4>Synchronous read port with initial value<a class="headerlink" href="#synchronous-read-port-with-initial-value" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p>Initial read port values can be combined with any other supported pattern</p></li>
<li><p>If block RAM is used and initial read port values are not natively supported
by the target, small emulation circuit will be inserted</p></li>
</ul>
<div class="highlight-verilog notranslate"><div class="highlight"><pre><span></span><span class="kt">reg</span><span class="w"> </span><span class="p">[</span><span class="n">DATA_WIDTH</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mh">1</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">mem</span><span class="w"> </span><span class="p">[</span><span class="mh">2</span><span class="o">**</span><span class="n">ADDR_WIDTH</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mh">1</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="mh">0</span><span class="p">];</span>
<span class="kt">reg</span><span class="w"> </span><span class="p">[</span><span class="n">DATA_WIDTH</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mh">1</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">read_data</span><span class="p">;</span>
<span class="k">initial</span><span class="w"> </span><span class="n">read_data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">&#39;h1234</span><span class="p">;</span>

<span class="k">always</span><span class="w"> </span><span class="p">@(</span><span class="k">posedge</span><span class="w"> </span><span class="n">clk</span><span class="p">)</span><span class="w"> </span><span class="k">begin</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">write_enable</span><span class="p">)</span>
<span class="w">                </span><span class="n">mem</span><span class="p">[</span><span class="n">write_addr</span><span class="p">]</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">write_data</span><span class="p">;</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">read_enable</span><span class="p">)</span>
<span class="w">                </span><span class="n">read_data</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">mem</span><span class="p">[</span><span class="n">read_addr</span><span class="p">];</span>
<span class="k">end</span>
</pre></div>
</div>
</section>
</section>
<section id="read-register-reset-patterns">
<h3>Read register reset patterns<a class="headerlink" href="#read-register-reset-patterns" title="Link to this heading">¶</a></h3>
<p>Resets can be combined with any other supported pattern (except that synchronous
reset and asynchronous reset cannot both be used on a single read port).  If
block RAM is used and the selected reset (synchronous or asynchronous) is used
but not natively supported by the target, small emulation circuitry will be
inserted.</p>
<section id="synchronous-reset-reset-priority-over-enable">
<h4>Synchronous reset, reset priority over enable<a class="headerlink" href="#synchronous-reset-reset-priority-over-enable" title="Link to this heading">¶</a></h4>
<div class="highlight-verilog notranslate"><div class="highlight"><pre><span></span><span class="kt">reg</span><span class="w"> </span><span class="p">[</span><span class="n">DATA_WIDTH</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mh">1</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">mem</span><span class="w"> </span><span class="p">[</span><span class="mh">2</span><span class="o">**</span><span class="n">ADDR_WIDTH</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mh">1</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="mh">0</span><span class="p">];</span>

<span class="k">always</span><span class="w"> </span><span class="p">@(</span><span class="k">posedge</span><span class="w"> </span><span class="n">clk</span><span class="p">)</span><span class="w"> </span><span class="k">begin</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">write_enable</span><span class="p">)</span>
<span class="w">                </span><span class="n">mem</span><span class="p">[</span><span class="n">write_addr</span><span class="p">]</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">write_data</span><span class="p">;</span>

<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">read_reset</span><span class="p">)</span>
<span class="w">                </span><span class="n">read_data</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mh">&#39;h1234</span><span class="p">;</span>
<span class="w">        </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">read_enable</span><span class="p">)</span>
<span class="w">                </span><span class="n">read_data</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">mem</span><span class="p">[</span><span class="n">read_addr</span><span class="p">];</span>
<span class="k">end</span>
</pre></div>
</div>
</section>
<section id="synchronous-reset-enable-priority-over-reset">
<h4>Synchronous reset, enable priority over reset<a class="headerlink" href="#synchronous-reset-enable-priority-over-reset" title="Link to this heading">¶</a></h4>
<div class="highlight-verilog notranslate"><div class="highlight"><pre><span></span><span class="kt">reg</span><span class="w"> </span><span class="p">[</span><span class="n">DATA_WIDTH</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mh">1</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">mem</span><span class="w"> </span><span class="p">[</span><span class="mh">2</span><span class="o">**</span><span class="n">ADDR_WIDTH</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mh">1</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="mh">0</span><span class="p">];</span>

<span class="k">always</span><span class="w"> </span><span class="p">@(</span><span class="k">posedge</span><span class="w"> </span><span class="n">clk</span><span class="p">)</span><span class="w"> </span><span class="k">begin</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">write_enable</span><span class="p">)</span>
<span class="w">                </span><span class="n">mem</span><span class="p">[</span><span class="n">write_addr</span><span class="p">]</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">write_data</span><span class="p">;</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">read_enable</span><span class="p">)</span>
<span class="w">                </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">read_reset</span><span class="p">)</span>
<span class="w">                        </span><span class="n">read_data</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mh">&#39;h1234</span><span class="p">;</span>
<span class="w">                </span><span class="k">else</span>
<span class="w">                        </span><span class="n">read_data</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">mem</span><span class="p">[</span><span class="n">read_addr</span><span class="p">];</span>
<span class="k">end</span>
</pre></div>
</div>
</section>
<section id="synchronous-read-port-with-asynchronous-reset">
<h4>Synchronous read port with asynchronous reset<a class="headerlink" href="#synchronous-read-port-with-asynchronous-reset" title="Link to this heading">¶</a></h4>
<div class="highlight-verilog notranslate"><div class="highlight"><pre><span></span><span class="kt">reg</span><span class="w"> </span><span class="p">[</span><span class="n">DATA_WIDTH</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mh">1</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">mem</span><span class="w"> </span><span class="p">[</span><span class="mh">2</span><span class="o">**</span><span class="n">ADDR_WIDTH</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mh">1</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="mh">0</span><span class="p">];</span>

<span class="k">always</span><span class="w"> </span><span class="p">@(</span><span class="k">posedge</span><span class="w"> </span><span class="n">clk</span><span class="p">)</span><span class="w"> </span><span class="k">begin</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">write_enable</span><span class="p">)</span>
<span class="w">                </span><span class="n">mem</span><span class="p">[</span><span class="n">write_addr</span><span class="p">]</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">write_data</span><span class="p">;</span>
<span class="k">end</span>

<span class="k">always</span><span class="w"> </span><span class="p">@(</span><span class="k">posedge</span><span class="w"> </span><span class="n">clk</span><span class="p">,</span><span class="w"> </span><span class="k">posedge</span><span class="w"> </span><span class="n">read_reset</span><span class="p">)</span><span class="w"> </span><span class="k">begin</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">read_reset</span><span class="p">)</span>
<span class="w">                </span><span class="n">read_data</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mh">&#39;h1234</span><span class="p">;</span>
<span class="w">        </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">read_enable</span><span class="p">)</span>
<span class="w">                </span><span class="n">read_data</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">mem</span><span class="p">[</span><span class="n">read_addr</span><span class="p">];</span>
<span class="k">end</span>
</pre></div>
</div>
</section>
</section>
<section id="asymmetric-memory-patterns">
<h3>Asymmetric memory patterns<a class="headerlink" href="#asymmetric-memory-patterns" title="Link to this heading">¶</a></h3>
<p>To construct an asymmetric memory (memory with read/write ports of differing
widths):</p>
<ul class="simple">
<li><p>Declare the memory with the width of the narrowest intended port</p></li>
<li><p>Split all wide ports into multiple narrow ports</p></li>
<li><p>To ensure the wide ports will be correctly merged:</p>
<ul>
<li><p>For the address, use a concatenation of actual address in the high bits and
a constant in the low bits</p></li>
<li><p>Ensure the actual address is identical for all ports belonging to the wide
port</p></li>
<li><p>Ensure that clock is identical</p></li>
<li><p>For read ports, ensure that enable/reset signals are identical (for write
ports, the enable signal may vary — this will result in using the byte
enable functionality)</p></li>
</ul>
</li>
</ul>
<p>Asymmetric memory is supported on all targets, but may require emulation
circuitry where not natively supported.  Note that when the memory is larger
than the underlying block RAM primitive, hardware asymmetric memory support is
likely not to be used even if present as it is more expensive.</p>
<section id="wide-synchronous-read-port">
<span id="wide-sr"></span><h4>Wide synchronous read port<a class="headerlink" href="#wide-synchronous-read-port" title="Link to this heading">¶</a></h4>
<div class="highlight-verilog notranslate"><div class="highlight"><pre><span></span><span class="kt">reg</span><span class="w"> </span><span class="p">[</span><span class="mh">7</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">mem</span><span class="w"> </span><span class="p">[</span><span class="mh">0</span><span class="o">:</span><span class="mh">255</span><span class="p">];</span>
<span class="kt">wire</span><span class="w"> </span><span class="p">[</span><span class="mh">7</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">write_addr</span><span class="p">;</span>
<span class="kt">wire</span><span class="w"> </span><span class="p">[</span><span class="mh">5</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">read_addr</span><span class="p">;</span>
<span class="kt">wire</span><span class="w"> </span><span class="p">[</span><span class="mh">7</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">write_data</span><span class="p">;</span>
<span class="kt">reg</span><span class="w"> </span><span class="p">[</span><span class="mh">31</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">read_data</span><span class="p">;</span>

<span class="k">always</span><span class="w"> </span><span class="p">@(</span><span class="k">posedge</span><span class="w"> </span><span class="n">clk</span><span class="p">)</span><span class="w"> </span><span class="k">begin</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">write_enable</span><span class="p">)</span>
<span class="w">                </span><span class="n">mem</span><span class="p">[</span><span class="n">write_addr</span><span class="p">]</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">write_data</span><span class="p">;</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">read_enable</span><span class="p">)</span><span class="w"> </span><span class="k">begin</span>
<span class="w">                </span><span class="n">read_data</span><span class="p">[</span><span class="mh">7</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">mem</span><span class="p">[{</span><span class="n">read_addr</span><span class="p">,</span><span class="w"> </span><span class="mh">2</span><span class="mb">&#39;b00</span><span class="p">}];</span>
<span class="w">                </span><span class="n">read_data</span><span class="p">[</span><span class="mh">15</span><span class="o">:</span><span class="mh">8</span><span class="p">]</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">mem</span><span class="p">[{</span><span class="n">read_addr</span><span class="p">,</span><span class="w"> </span><span class="mh">2</span><span class="mb">&#39;b01</span><span class="p">}];</span>
<span class="w">                </span><span class="n">read_data</span><span class="p">[</span><span class="mh">23</span><span class="o">:</span><span class="mh">16</span><span class="p">]</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">mem</span><span class="p">[{</span><span class="n">read_addr</span><span class="p">,</span><span class="w"> </span><span class="mh">2</span><span class="mb">&#39;b10</span><span class="p">}];</span>
<span class="w">                </span><span class="n">read_data</span><span class="p">[</span><span class="mh">31</span><span class="o">:</span><span class="mh">24</span><span class="p">]</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">mem</span><span class="p">[{</span><span class="n">read_addr</span><span class="p">,</span><span class="w"> </span><span class="mh">2</span><span class="mb">&#39;b11</span><span class="p">}];</span>
<span class="w">        </span><span class="k">end</span>
<span class="k">end</span>
</pre></div>
</div>
</section>
<section id="wide-asynchronous-read-port">
<h4>Wide asynchronous read port<a class="headerlink" href="#wide-asynchronous-read-port" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p>Note: the only target natively supporting this pattern is Xilinx UltraScale</p></li>
</ul>
<div class="highlight-verilog notranslate"><div class="highlight"><pre><span></span><span class="kt">reg</span><span class="w"> </span><span class="p">[</span><span class="mh">7</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">mem</span><span class="w"> </span><span class="p">[</span><span class="mh">0</span><span class="o">:</span><span class="mh">511</span><span class="p">];</span>
<span class="kt">wire</span><span class="w"> </span><span class="p">[</span><span class="mh">8</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">write_addr</span><span class="p">;</span>
<span class="kt">wire</span><span class="w"> </span><span class="p">[</span><span class="mh">5</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">read_addr</span><span class="p">;</span>
<span class="kt">wire</span><span class="w"> </span><span class="p">[</span><span class="mh">7</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">write_data</span><span class="p">;</span>
<span class="kt">wire</span><span class="w"> </span><span class="p">[</span><span class="mh">63</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">read_data</span><span class="p">;</span>

<span class="k">always</span><span class="w"> </span><span class="p">@(</span><span class="k">posedge</span><span class="w"> </span><span class="n">clk</span><span class="p">)</span><span class="w"> </span><span class="k">begin</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">write_enable</span><span class="p">)</span>
<span class="w">                </span><span class="n">mem</span><span class="p">[</span><span class="n">write_addr</span><span class="p">]</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">write_data</span><span class="p">;</span>
<span class="k">end</span>

<span class="k">assign</span><span class="w"> </span><span class="n">read_data</span><span class="p">[</span><span class="mh">7</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mem</span><span class="p">[{</span><span class="n">read_addr</span><span class="p">,</span><span class="w"> </span><span class="mh">3</span><span class="mb">&#39;b000</span><span class="p">}];</span>
<span class="k">assign</span><span class="w"> </span><span class="n">read_data</span><span class="p">[</span><span class="mh">15</span><span class="o">:</span><span class="mh">8</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mem</span><span class="p">[{</span><span class="n">read_addr</span><span class="p">,</span><span class="w"> </span><span class="mh">3</span><span class="mb">&#39;b001</span><span class="p">}];</span>
<span class="k">assign</span><span class="w"> </span><span class="n">read_data</span><span class="p">[</span><span class="mh">23</span><span class="o">:</span><span class="mh">16</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mem</span><span class="p">[{</span><span class="n">read_addr</span><span class="p">,</span><span class="w"> </span><span class="mh">3</span><span class="mb">&#39;b010</span><span class="p">}];</span>
<span class="k">assign</span><span class="w"> </span><span class="n">read_data</span><span class="p">[</span><span class="mh">31</span><span class="o">:</span><span class="mh">24</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mem</span><span class="p">[{</span><span class="n">read_addr</span><span class="p">,</span><span class="w"> </span><span class="mh">3</span><span class="mb">&#39;b011</span><span class="p">}];</span>
<span class="k">assign</span><span class="w"> </span><span class="n">read_data</span><span class="p">[</span><span class="mh">39</span><span class="o">:</span><span class="mh">32</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mem</span><span class="p">[{</span><span class="n">read_addr</span><span class="p">,</span><span class="w"> </span><span class="mh">3</span><span class="mb">&#39;b100</span><span class="p">}];</span>
<span class="k">assign</span><span class="w"> </span><span class="n">read_data</span><span class="p">[</span><span class="mh">47</span><span class="o">:</span><span class="mh">40</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mem</span><span class="p">[{</span><span class="n">read_addr</span><span class="p">,</span><span class="w"> </span><span class="mh">3</span><span class="mb">&#39;b101</span><span class="p">}];</span>
<span class="k">assign</span><span class="w"> </span><span class="n">read_data</span><span class="p">[</span><span class="mh">55</span><span class="o">:</span><span class="mh">48</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mem</span><span class="p">[{</span><span class="n">read_addr</span><span class="p">,</span><span class="w"> </span><span class="mh">3</span><span class="mb">&#39;b110</span><span class="p">}];</span>
<span class="k">assign</span><span class="w"> </span><span class="n">read_data</span><span class="p">[</span><span class="mh">63</span><span class="o">:</span><span class="mh">56</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mem</span><span class="p">[{</span><span class="n">read_addr</span><span class="p">,</span><span class="w"> </span><span class="mh">3</span><span class="mb">&#39;b111</span><span class="p">}];</span>
</pre></div>
</div>
</section>
<section id="wide-write-port">
<h4>Wide write port<a class="headerlink" href="#wide-write-port" title="Link to this heading">¶</a></h4>
<div class="highlight-verilog notranslate"><div class="highlight"><pre><span></span><span class="kt">reg</span><span class="w"> </span><span class="p">[</span><span class="mh">7</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">mem</span><span class="w"> </span><span class="p">[</span><span class="mh">0</span><span class="o">:</span><span class="mh">255</span><span class="p">];</span>
<span class="kt">wire</span><span class="w"> </span><span class="p">[</span><span class="mh">5</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">write_addr</span><span class="p">;</span>
<span class="kt">wire</span><span class="w"> </span><span class="p">[</span><span class="mh">7</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">read_addr</span><span class="p">;</span>
<span class="kt">wire</span><span class="w"> </span><span class="p">[</span><span class="mh">31</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">write_data</span><span class="p">;</span>
<span class="kt">reg</span><span class="w"> </span><span class="p">[</span><span class="mh">7</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">read_data</span><span class="p">;</span>

<span class="k">always</span><span class="w"> </span><span class="p">@(</span><span class="k">posedge</span><span class="w"> </span><span class="n">clk</span><span class="p">)</span><span class="w"> </span><span class="k">begin</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">write_enable</span><span class="p">[</span><span class="mh">0</span><span class="p">])</span>
<span class="w">                </span><span class="n">mem</span><span class="p">[{</span><span class="n">write_addr</span><span class="p">,</span><span class="w"> </span><span class="mh">2</span><span class="mb">&#39;b00</span><span class="p">}]</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">write_data</span><span class="p">[</span><span class="mh">7</span><span class="o">:</span><span class="mh">0</span><span class="p">];</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">write_enable</span><span class="p">[</span><span class="mh">1</span><span class="p">])</span>
<span class="w">                </span><span class="n">mem</span><span class="p">[{</span><span class="n">write_addr</span><span class="p">,</span><span class="w"> </span><span class="mh">2</span><span class="mb">&#39;b01</span><span class="p">}]</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">write_data</span><span class="p">[</span><span class="mh">15</span><span class="o">:</span><span class="mh">8</span><span class="p">];</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">write_enable</span><span class="p">[</span><span class="mh">2</span><span class="p">])</span>
<span class="w">                </span><span class="n">mem</span><span class="p">[{</span><span class="n">write_addr</span><span class="p">,</span><span class="w"> </span><span class="mh">2</span><span class="mb">&#39;b10</span><span class="p">}]</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">write_data</span><span class="p">[</span><span class="mh">23</span><span class="o">:</span><span class="mh">16</span><span class="p">];</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">write_enable</span><span class="p">[</span><span class="mh">3</span><span class="p">])</span>
<span class="w">                </span><span class="n">mem</span><span class="p">[{</span><span class="n">write_addr</span><span class="p">,</span><span class="w"> </span><span class="mh">2</span><span class="mb">&#39;b11</span><span class="p">}]</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">write_data</span><span class="p">[</span><span class="mh">31</span><span class="o">:</span><span class="mh">24</span><span class="p">];</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">read_enable</span><span class="p">)</span>
<span class="w">                </span><span class="n">read_data</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">mem</span><span class="p">[</span><span class="n">read_addr</span><span class="p">];</span>
<span class="k">end</span>
</pre></div>
</div>
</section>
</section>
<section id="true-dual-port-tdp-patterns">
<h3>True dual port (TDP) patterns<a class="headerlink" href="#true-dual-port-tdp-patterns" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>Many different variations of true dual port memory can be created by combining
two single-port RAM patterns on the same memory</p></li>
<li><p>When TDP memory is used, memory inference code has much less maneuver room to
create requested semantics compared to individual single-port patterns (which
can end up lowered to SDP memory where necessary) — supported patterns depend
strongly on the target</p></li>
<li><p>In particular, when both ports have the same clock, it’s likely that
“undefined collision” mode needs to be manually selected to enable TDP memory
inference</p></li>
<li><p>The examples below are non-exhaustive — many more combinations of port types
are possible</p></li>
<li><p>Note: if two write ports are in the same process, this defines a priority
relation between them (if both ports are active in the same clock, the later
one wins). On almost all targets, this will result in a bit of extra circuitry
to ensure the priority semantics. If this is not what you want, put them in
separate processes.</p>
<ul>
<li><p>Priority is not supported when using the verific front end and any priority
semantics are ignored.</p></li>
</ul>
</li>
</ul>
<section id="tdp-with-different-clocks-exclusive-read-write">
<h4>TDP with different clocks, exclusive read/write<a class="headerlink" href="#tdp-with-different-clocks-exclusive-read-write" title="Link to this heading">¶</a></h4>
<div class="highlight-verilog notranslate"><div class="highlight"><pre><span></span><span class="kt">reg</span><span class="w"> </span><span class="p">[</span><span class="n">DATA_WIDTH</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mh">1</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">mem</span><span class="w"> </span><span class="p">[</span><span class="mh">2</span><span class="o">**</span><span class="n">ADDR_WIDTH</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mh">1</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="mh">0</span><span class="p">];</span>

<span class="k">always</span><span class="w"> </span><span class="p">@(</span><span class="k">posedge</span><span class="w"> </span><span class="n">clk_a</span><span class="p">)</span><span class="w"> </span><span class="k">begin</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">write_enable_a</span><span class="p">)</span>
<span class="w">                </span><span class="n">mem</span><span class="p">[</span><span class="n">addr_a</span><span class="p">]</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">write_data_a</span><span class="p">;</span>
<span class="w">        </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">read_enable_a</span><span class="p">)</span>
<span class="w">                </span><span class="n">read_data_a</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">mem</span><span class="p">[</span><span class="n">addr_a</span><span class="p">];</span>
<span class="k">end</span>

<span class="k">always</span><span class="w"> </span><span class="p">@(</span><span class="k">posedge</span><span class="w"> </span><span class="n">clk_b</span><span class="p">)</span><span class="w"> </span><span class="k">begin</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">write_enable_b</span><span class="p">)</span>
<span class="w">                </span><span class="n">mem</span><span class="p">[</span><span class="n">addr_b</span><span class="p">]</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">write_data_b</span><span class="p">;</span>
<span class="w">        </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">read_enable_b</span><span class="p">)</span>
<span class="w">                </span><span class="n">read_data_b</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">mem</span><span class="p">[</span><span class="n">addr_b</span><span class="p">];</span>
<span class="k">end</span>
</pre></div>
</div>
</section>
<section id="tdp-with-same-clock-read-first-behavior">
<h4>TDP with same clock, read-first behavior<a class="headerlink" href="#tdp-with-same-clock-read-first-behavior" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p>This requires hardware inter-port read-first behavior, and will only work on
some targets (Xilinx, Nexus)</p></li>
</ul>
<div class="highlight-verilog notranslate"><div class="highlight"><pre><span></span><span class="kt">reg</span><span class="w"> </span><span class="p">[</span><span class="n">DATA_WIDTH</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mh">1</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">mem</span><span class="w"> </span><span class="p">[</span><span class="mh">2</span><span class="o">**</span><span class="n">ADDR_WIDTH</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mh">1</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="mh">0</span><span class="p">];</span>

<span class="k">always</span><span class="w"> </span><span class="p">@(</span><span class="k">posedge</span><span class="w"> </span><span class="n">clk</span><span class="p">)</span><span class="w"> </span><span class="k">begin</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">write_enable_a</span><span class="p">)</span>
<span class="w">                </span><span class="n">mem</span><span class="p">[</span><span class="n">addr_a</span><span class="p">]</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">write_data_a</span><span class="p">;</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">read_enable_a</span><span class="p">)</span>
<span class="w">                </span><span class="n">read_data_a</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">mem</span><span class="p">[</span><span class="n">addr_a</span><span class="p">];</span>
<span class="k">end</span>

<span class="k">always</span><span class="w"> </span><span class="p">@(</span><span class="k">posedge</span><span class="w"> </span><span class="n">clk</span><span class="p">)</span><span class="w"> </span><span class="k">begin</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">write_enable_b</span><span class="p">)</span>
<span class="w">                </span><span class="n">mem</span><span class="p">[</span><span class="n">addr_b</span><span class="p">]</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">write_data_b</span><span class="p">;</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">read_enable_b</span><span class="p">)</span>
<span class="w">                </span><span class="n">read_data_b</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">mem</span><span class="p">[</span><span class="n">addr_b</span><span class="p">];</span>
<span class="k">end</span>
</pre></div>
</div>
</section>
<section id="tdp-with-multiple-read-ports">
<h4>TDP with multiple read ports<a class="headerlink" href="#tdp-with-multiple-read-ports" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p>The combination of a single write port with an arbitrary amount of read ports
is supported on all targets — if a multi-read port primitive is available
(like Xilinx RAM64M), it’ll be used as appropriate.  Otherwise, the memory
will be automatically split into multiple primitives.</p></li>
</ul>
<div class="highlight-verilog notranslate"><div class="highlight"><pre><span></span><span class="kt">reg</span><span class="w"> </span><span class="p">[</span><span class="mh">31</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">mem</span><span class="w"> </span><span class="p">[</span><span class="mh">0</span><span class="o">:</span><span class="mh">31</span><span class="p">];</span>

<span class="k">always</span><span class="w"> </span><span class="p">@(</span><span class="k">posedge</span><span class="w"> </span><span class="n">clk</span><span class="p">)</span><span class="w"> </span><span class="k">begin</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">write_enable</span><span class="p">)</span>
<span class="w">                </span><span class="n">mem</span><span class="p">[</span><span class="n">write_addr</span><span class="p">]</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">write_data</span><span class="p">;</span>
<span class="k">end</span>

<span class="k">assign</span><span class="w"> </span><span class="n">read_data_a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mem</span><span class="p">[</span><span class="n">read_addr_a</span><span class="p">];</span>
<span class="k">assign</span><span class="w"> </span><span class="n">read_data_b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mem</span><span class="p">[</span><span class="n">read_addr_b</span><span class="p">];</span>
<span class="k">assign</span><span class="w"> </span><span class="n">read_data_c</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mem</span><span class="p">[</span><span class="n">read_addr_c</span><span class="p">];</span>
</pre></div>
</div>
</section>
</section>
<section id="patterns-only-supported-with-verific">
<h3>Patterns only supported with Verific<a class="headerlink" href="#patterns-only-supported-with-verific" title="Link to this heading">¶</a></h3>
<p>The following patterns are only supported when the design is read in using the
Verific front-end.</p>
<section id="synchronous-sdp-with-write-first-behavior-via-blocking-assignments">
<h4>Synchronous SDP with write-first behavior via blocking assignments<a class="headerlink" href="#synchronous-sdp-with-write-first-behavior-via-blocking-assignments" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p>Use <a class="reference internal" href="#sdp-wf">sdp_wf</a> for compatibility with Yosys
Verilog frontend.</p></li>
</ul>
<div class="highlight-verilog notranslate"><div class="highlight"><pre><span></span><span class="kt">reg</span><span class="w"> </span><span class="p">[</span><span class="n">DATA_WIDTH</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mh">1</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">mem</span><span class="w"> </span><span class="p">[</span><span class="mh">2</span><span class="o">**</span><span class="n">ADDR_WIDTH</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mh">1</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="mh">0</span><span class="p">];</span>

<span class="k">always</span><span class="w"> </span><span class="p">@(</span><span class="k">posedge</span><span class="w"> </span><span class="n">clk</span><span class="p">)</span><span class="w"> </span><span class="k">begin</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">write_enable</span><span class="p">)</span>
<span class="w">                </span><span class="n">mem</span><span class="p">[</span><span class="n">write_addr</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">write_data</span><span class="p">;</span>

<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">read_enable</span><span class="p">)</span>
<span class="w">                </span><span class="n">read_data</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">mem</span><span class="p">[</span><span class="n">read_addr</span><span class="p">];</span>
<span class="k">end</span>
</pre></div>
</div>
</section>
<section id="asymmetric-memories-via-part-selection">
<h4>Asymmetric memories via part selection<a class="headerlink" href="#asymmetric-memories-via-part-selection" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p>Build wide ports out of narrow ports instead (see <a class="reference internal" href="#wide-sr">wide_sr</a>) for
compatibility with Yosys Verilog frontend.</p></li>
</ul>
<div class="highlight-verilog notranslate"><div class="highlight"><pre><span></span><span class="kt">reg</span><span class="w"> </span><span class="p">[</span><span class="mh">31</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">mem</span><span class="w"> </span><span class="p">[</span><span class="mh">2</span><span class="o">**</span><span class="n">ADDR_WIDTH</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mh">1</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="mh">0</span><span class="p">];</span>

<span class="kt">wire</span><span class="w"> </span><span class="p">[</span><span class="mh">1</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">byte_lane</span><span class="p">;</span>
<span class="kt">wire</span><span class="w"> </span><span class="p">[</span><span class="mh">7</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">write_data</span><span class="p">;</span>

<span class="k">always</span><span class="w"> </span><span class="p">@(</span><span class="k">posedge</span><span class="w"> </span><span class="n">clk</span><span class="p">)</span><span class="w"> </span><span class="k">begin</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">write_enable</span><span class="p">)</span>
<span class="w">                </span><span class="n">mem</span><span class="p">[</span><span class="n">write_addr</span><span class="p">][</span><span class="n">byte_lane</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mh">8</span><span class="w"> </span><span class="o">+:</span><span class="w"> </span><span class="mh">8</span><span class="p">]</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">write_data</span><span class="p">;</span>

<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">read_enable</span><span class="p">)</span>
<span class="w">                </span><span class="n">read_data</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">mem</span><span class="p">[</span><span class="n">read_addr</span><span class="p">];</span>
<span class="k">end</span>
</pre></div>
</div>
</section>
</section>
<section id="undesired-patterns">
<h3>Undesired patterns<a class="headerlink" href="#undesired-patterns" title="Link to this heading">¶</a></h3>
<section id="asynchronous-writes">
<h4>Asynchronous writes<a class="headerlink" href="#asynchronous-writes" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p>Not supported in modern FPGAs</p></li>
<li><p>Not supported in yosys code anyhow</p></li>
</ul>
<div class="highlight-verilog notranslate"><div class="highlight"><pre><span></span><span class="kt">reg</span><span class="w"> </span><span class="p">[</span><span class="n">DATA_WIDTH</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mh">1</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">mem</span><span class="w"> </span><span class="p">[</span><span class="mh">2</span><span class="o">**</span><span class="n">ADDR_WIDTH</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mh">1</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="mh">0</span><span class="p">];</span>

<span class="k">always</span><span class="w"> </span><span class="p">@</span><span class="o">*</span><span class="w"> </span><span class="k">begin</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">write_enable</span><span class="p">)</span>
<span class="w">                </span><span class="n">mem</span><span class="p">[</span><span class="n">write_addr</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">write_data</span><span class="p">;</span>
<span class="k">end</span>

<span class="k">assign</span><span class="w"> </span><span class="n">read_data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mem</span><span class="p">[</span><span class="n">read_addr</span><span class="p">];</span>
</pre></div>
</div>
</section>
</section>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="opt.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Optimization passes</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="fsm.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">FSM handling</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2025 YosysHQ GmbH
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            <div class="icons">
              <a class="muted-link" href="https://readthedocs.org/projects/yosys" aria-label="On Read the Docs">
                <svg x="0px" y="0px" viewBox="-125 217 360 360" xml:space="preserve">
                  <path fill="currentColor" d="M39.2,391.3c-4.2,0.6-7.1,4.4-6.5,8.5c0.4,3,2.6,5.5,5.5,6.3 c0,0,18.5,6.1,50,8.7c25.3,2.1,54-1.8,54-1.8c4.2-0.1,7.5-3.6,7.4-7.8c-0.1-4.2-3.6-7.5-7.8-7.4c-0.5,0-1,0.1-1.5,0.2 c0,0-28.1,3.5-50.9,1.6c-30.1-2.4-46.5-7.9-46.5-7.9C41.7,391.3,40.4,391.1,39.2,391.3z M39.2,353.6c-4.2,0.6-7.1,4.4-6.5,8.5 c0.4,3,2.6,5.5,5.5,6.3c0,0,18.5,6.1,50,8.7c25.3,2.1,54-1.8,54-1.8c4.2-0.1,7.5-3.6,7.4-7.8c-0.1-4.2-3.6-7.5-7.8-7.4 c-0.5,0-1,0.1-1.5,0.2c0,0-28.1,3.5-50.9,1.6c-30.1-2.4-46.5-7.9-46.5-7.9C41.7,353.6,40.4,353.4,39.2,353.6z M39.2,315.9 c-4.2,0.6-7.1,4.4-6.5,8.5c0.4,3,2.6,5.5,5.5,6.3c0,0,18.5,6.1,50,8.7c25.3,2.1,54-1.8,54-1.8c4.2-0.1,7.5-3.6,7.4-7.8 c-0.1-4.2-3.6-7.5-7.8-7.4c-0.5,0-1,0.1-1.5,0.2c0,0-28.1,3.5-50.9,1.6c-30.1-2.4-46.5-7.9-46.5-7.9 C41.7,315.9,40.4,315.8,39.2,315.9z M39.2,278.3c-4.2,0.6-7.1,4.4-6.5,8.5c0.4,3,2.6,5.5,5.5,6.3c0,0,18.5,6.1,50,8.7 c25.3,2.1,54-1.8,54-1.8c4.2-0.1,7.5-3.6,7.4-7.8c-0.1-4.2-3.6-7.5-7.8-7.4c-0.5,0-1,0.1-1.5,0.2c0,0-28.1,3.5-50.9,1.6 c-30.1-2.4-46.5-7.9-46.5-7.9C41.7,278.2,40.4,278.1,39.2,278.3z M-13.6,238.5c-39.6,0.3-54.3,12.5-54.3,12.5v295.7 c0,0,14.4-12.4,60.8-10.5s55.9,18.2,112.9,19.3s71.3-8.8,71.3-8.8l0.8-301.4c0,0-25.6,7.3-75.6,7.7c-49.9,0.4-61.9-12.7-107.7-14.2 C-8.2,238.6-10.9,238.5-13.6,238.5z M19.5,257.8c0,0,24,7.9,68.3,10.1c37.5,1.9,75-3.7,75-3.7v267.9c0,0-19,10-66.5,6.6 C59.5,536.1,19,522.1,19,522.1L19.5,257.8z M-3.6,264.8c4.2,0,7.7,3.4,7.7,7.7c0,4.2-3.4,7.7-7.7,7.7c0,0-12.4,0.1-20,0.8 c-12.7,1.3-21.4,5.9-21.4,5.9c-3.7,2-8.4,0.5-10.3-3.2c-2-3.7-0.5-8.4,3.2-10.3c0,0,0,0,0,0c0,0,11.3-6,27-7.5 C-16,264.9-3.6,264.8-3.6,264.8z M-11,302.6c4.2-0.1,7.4,0,7.4,0c4.2,0.5,7.2,4.3,6.7,8.5c-0.4,3.5-3.2,6.3-6.7,6.7 c0,0-12.4,0.1-20,0.8c-12.7,1.3-21.4,5.9-21.4,5.9c-3.7,2-8.4,0.5-10.3-3.2c-2-3.7-0.5-8.4,3.2-10.3c0,0,11.3-6,27-7.5 C-20.5,302.9-15.2,302.7-11,302.6z M-3.6,340.2c4.2,0,7.7,3.4,7.7,7.7s-3.4,7.7-7.7,7.7c0,0-12.4-0.1-20,0.7 c-12.7,1.3-21.4,5.9-21.4,5.9c-3.7,2-8.4,0.5-10.3-3.2c-2-3.7-0.5-8.4,3.2-10.3c0,0,11.3-6,27-7.5C-16,340.1-3.6,340.2-3.6,340.2z" />
                </svg>
              </a><a class="muted-link" href="https://github.com/YosysHQ/yosys" aria-label="On GitHub">
                <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 16 16">
                  <path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0 0 16 8c0-4.42-3.58-8-8-8z"></path>
                </svg>
              </a>
            </div>
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
          YosysHQ
          </span>
        </div>
        <div class="toc-tree-container yosyshq-links" style="padding-bottom: 0">
          <div class="toc-tree">
            <ul>
              <li></li>
              <li><a class="reference external" href="https://yosyshq.readthedocs.io">Docs</a></li>
              <li><a class="reference external" href="https://blog.yosyshq.com">Blog</a></li>
              <li><a class="reference external" href="https://www.yosyshq.com">Website</a></li>
            </ul>
          </div>
        </div>
        
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Memory handling</a><ul>
<li><a class="reference internal" href="#the-memory-command">The <code class="xref cmd cmd-ref docutils literal notranslate"><span class="pre">memory</span></code> command</a><ul>
<li><a class="reference internal" href="#example">Example</a></li>
</ul>
</li>
<li><a class="reference internal" href="#memory-mapping">Memory mapping</a></li>
<li><a class="reference internal" href="#supported-memory-patterns">Supported memory patterns</a><ul>
<li><a class="reference internal" href="#notes">Notes</a><ul>
<li><a class="reference internal" href="#memory-kind-selection">Memory kind selection</a></li>
<li><a class="reference internal" href="#initial-data">Initial data</a></li>
<li><a class="reference internal" href="#write-port-with-byte-enables">Write port with byte enables</a></li>
</ul>
</li>
<li><a class="reference internal" href="#simple-dual-port-sdp-memory-patterns">Simple dual port (SDP) memory patterns</a><ul>
<li><a class="reference internal" href="#asynchronous-read-sdp">Asynchronous-read SDP</a></li>
<li><a class="reference internal" href="#synchronous-sdp-with-clock-domain-crossing">Synchronous SDP with clock domain crossing</a></li>
<li><a class="reference internal" href="#synchronous-sdp-read-first">Synchronous SDP read first</a></li>
<li><a class="reference internal" href="#synchronous-sdp-with-undefined-collision-behavior">Synchronous SDP with undefined collision behavior</a></li>
<li><a class="reference internal" href="#synchronous-sdp-with-write-first-behavior">Synchronous SDP with write-first behavior</a></li>
<li><a class="reference internal" href="#synchronous-sdp-with-write-first-behavior-alternate-pattern">Synchronous SDP with write-first behavior (alternate pattern)</a></li>
</ul>
</li>
<li><a class="reference internal" href="#single-port-ram-memory-patterns">Single-port RAM memory patterns</a><ul>
<li><a class="reference internal" href="#asynchronous-read-single-port-ram">Asynchronous-read single-port RAM</a></li>
<li><a class="reference internal" href="#synchronous-single-port-ram-with-mutually-exclusive-read-write">Synchronous single-port RAM with mutually exclusive read/write</a></li>
<li><a class="reference internal" href="#synchronous-single-port-ram-with-read-first-behavior">Synchronous single-port RAM with read-first behavior</a></li>
<li><a class="reference internal" href="#synchronous-single-port-ram-with-write-first-behavior">Synchronous single-port RAM with write-first behavior</a></li>
<li><a class="reference internal" href="#synchronous-read-port-with-initial-value">Synchronous read port with initial value</a></li>
</ul>
</li>
<li><a class="reference internal" href="#read-register-reset-patterns">Read register reset patterns</a><ul>
<li><a class="reference internal" href="#synchronous-reset-reset-priority-over-enable">Synchronous reset, reset priority over enable</a></li>
<li><a class="reference internal" href="#synchronous-reset-enable-priority-over-reset">Synchronous reset, enable priority over reset</a></li>
<li><a class="reference internal" href="#synchronous-read-port-with-asynchronous-reset">Synchronous read port with asynchronous reset</a></li>
</ul>
</li>
<li><a class="reference internal" href="#asymmetric-memory-patterns">Asymmetric memory patterns</a><ul>
<li><a class="reference internal" href="#wide-synchronous-read-port">Wide synchronous read port</a></li>
<li><a class="reference internal" href="#wide-asynchronous-read-port">Wide asynchronous read port</a></li>
<li><a class="reference internal" href="#wide-write-port">Wide write port</a></li>
</ul>
</li>
<li><a class="reference internal" href="#true-dual-port-tdp-patterns">True dual port (TDP) patterns</a><ul>
<li><a class="reference internal" href="#tdp-with-different-clocks-exclusive-read-write">TDP with different clocks, exclusive read/write</a></li>
<li><a class="reference internal" href="#tdp-with-same-clock-read-first-behavior">TDP with same clock, read-first behavior</a></li>
<li><a class="reference internal" href="#tdp-with-multiple-read-ports">TDP with multiple read ports</a></li>
</ul>
</li>
<li><a class="reference internal" href="#patterns-only-supported-with-verific">Patterns only supported with Verific</a><ul>
<li><a class="reference internal" href="#synchronous-sdp-with-write-first-behavior-via-blocking-assignments">Synchronous SDP with write-first behavior via blocking assignments</a></li>
<li><a class="reference internal" href="#asymmetric-memories-via-part-selection">Asymmetric memories via part selection</a></li>
</ul>
</li>
<li><a class="reference internal" href="#undesired-patterns">Undesired patterns</a><ul>
<li><a class="reference internal" href="#asynchronous-writes">Asynchronous writes</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

          </div>
        </div>
        
      </div>
      
    </aside>
  </div>
</div><script src="../../_static/documentation_options.js?v=33dbc229"></script>
    <script src="../../_static/doctools.js?v=9bcbadda"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/scripts/furo-ys.js?v=8d9c4053"></script>
    </body>
</html>